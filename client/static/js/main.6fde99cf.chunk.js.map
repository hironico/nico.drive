{"version":3,"sources":["AppTheme.js","AppSettings.js","views/LoginView.js","components/DavHeader.js","components/RatingPane.js","components/FileDetailsPane.js","components/RegularFile.js","components/Folder.js","components/Image.js","components/DavDirectoryPane.js","components/DavBreadCrumb.js","components/DavUploadButton.js","components/DavNewFolderButton.js","components/DavToolBar.js","components/tree/Tree.js","components/tree/TreeFolder.js","components/DavSideBar.js","views/DavExplorerView.js","components/welcome-page/WelcomePage.js","App.js","reportWebVitals.js","index.js"],"names":["appTheme","merge","defaultTheme","typography","fontFamilies","display","ui","mono","components","Text","baseStyle","fontFamily","Heading","Link","defaultValue","authType","AuthType","Basic","username","davClient","davBaseUrl","davApiBaseUrl","davHomeDirectory","connectionValid","supportedFormats","filter","filterRegExp","RegExp","filterFileItems","setDavClient","client","getThumbApiUrl","getExifApiUrl","getMetadataApiUrl","getAuthUrl","isImageFile","disconnect","getUserRootDirectories","DavConfigurationContext","React","createContext","DavConfigurationProvider","value","valueStr","setState","davBaseUri","URL","proto","protocol","host","hostname","port","state","filename","startsWith","index","lastIndexOf","extention","toUpperCase","substring","indexOf","render","Provider","props","children","showConnectionDialog","Component","LoginView","componentDidMount","errorMessage","componentDidUpdate","prevProps","prevState","fetchUserRootDirectories","url","context","connectionSuccess","fetchUrl","fetch","method","headers","then","res","json","userInfo","userRootDirs","rootDirs","catch","error","console","log","testConnection","a","info","clientOptions","password","clientUrl","davContext","selectedRootDir","createClient","getDirectoryContents","contents","isLoading","onConfirm","onTxtLoginChange","evt","target","isLoginButtonDisabled","renderErrorMessage","Alert","intent","renderLoginForm","Pane","gridTemplateColumns","margin","padding","elevation","marginTop","marginLeft","marginRight","marginBottom","background","is","textAlign","textShadow","TextInputField","id","disabled","onChange","placeholder","label","autoComplete","type","e","Label","Combobox","items","selected","description","Button","iconBefore","LogInIcon","appearance","onClick","Paragraph","to","window","location","contextType","DavHeader","paddingTop","paddingBottom","paddingLeft","justifyItems","SearchInput","width","justifySelf","Popover","position","Position","BOTTOM_RIGHT","content","Menu","Group","Item","icon","InfoSignIcon","Badge","color","Divider","LogOutIcon","Avatar","name","size","style","cursor","RatingPane","stars","rating","maxRating","lightedStar","StarIcon","push","unlightedStar","StarEmptyIcon","alignItems","FileDetailsPane","loadImageInformation","loadMetaDataInformation","getDownloadLink","getFileDownloadLink","fileItem","metaUrl","paths","split","homeDir","length","exifRequest","body","JSON","stringify","imageData","err","metadata","tags","metadataRequest","renderFileItemSize","unite","taille","toFixed","renderImageTabs","isImage","basename","Tablist","flexBasis","tabs","tab","map","Tab","onSelect","selectedIndex","isSelected","panelTab","renderFileDetails","renderImageDetails","renderMetadataDetails","role","Table","Head","height","TextHeaderCell","Body","Row","TextCell","lastmod","rows","image","renderEmptyDetails","Object","keys","key","message","EmptyState","title","orientation","SearchIcon","iconBgColor","renderTags","TagInput","inputProps","values","flexGrow","getRating","Number","parseInt","downloadIcon","DownloadIcon","zIndex","flexShrink","backgroundColor","borderBottom","href","RegularFile","_capitalize","str","lower","toLowerCase","charAt","slice","download","dlLink","open","renderMimeType","mimeType","endsWith","renderHttpDate","httpDate","DateTime","fromHTTP","toLocaleString","DATETIME_SHORT_WITH_SECONDS","renderGridLabel","justifyContent","overflow","maxWidth","maxHeigh","renderActionMenu","renderGrid","Card","flexDirection","DocumentIcon","handleShowDetails","DeleteIcon","handleDelete","boxShadow","border","maxHeight","MoreIcon","renderTable","isSelectable","mime","displayMode","Folder","handleNavigate","FolderCloseIcon","Image","thumb","generateThumb","req","that","blob","reader","FileReader","readAsDataURL","onloadend","base64data","result","prev","renderGridThumb","styleThumb","backgroundImage","backgroundPosition","backgroundSize","Spinner","renderTableThumb","DavDirectoryPane","shouldUpdateState","folders","currentRegExp","folder","search","files","file","navigate","folderName","delete","isDeleteDialogShown","fileItemToDelete","doDelete","handleDeleteFileItem","renderFolders","directory","renderFiles","renderLoadingState","renderNothingFound","renderEmptyState","renderFoldersAndFiles","renderDirectoryContentsGrid","flexWrap","loading","renderDirectoryContentsTable","renderDeleteConfirmDialog","Dialog","isShown","onCloseComplete","hasFooter","directoryContents","DavBreadCrumb","path","currentDirectory","chevronIcon","ChevronRightIcon","homeIcon","HomeIcon","currentDirs","navDirs","breadCrumb","dir","fullPath","join","DavUploadButton","uploadFile","showOpenFilePicker","multiple","handles","currentUploads","doUploadFiles","handle","getFile","targetFileName","uploadOption","contentLength","putFileContents","toaster","danger","finally","splice","status","UploadIcon","DavNewFolderButton","createFolder","newDir","newFolderName","createDirectory","popoverShown","destDir","moveToFolder","close","gridTemplateRows","gridColumnStart","gridColumnEnd","TextInput","Checkbox","checked","alignSelf","FolderNewIcon","DavToolBar","renderFolderTools","renderDisplayTools","handleDisplayMode","GridViewIcon","ListIcon","Tree","styles","folderLabel","span","collapsibleOpen","collapsibleClosed","TreeFolder","snapshot","absolutePath","isOpen","lastIndex","parentFolder","dirs","directoryItems","item","subDirs","handleToggle","handleClick","renderSubDirectories","plusIcon","ChevronDownIcon","folderIcon","FolderOpenIcon","DavSideBar","overflowX","DavExplorerView","doGetDirectoryContents","directories","separator","navigateAbsolute","toggleFileDetails","modified","homeDirectory","showDetails","detailedFileItem","changeDisplayMode","deleteFileItem","deleteFile","overflowY","SideSheet","marginX","WelcomePage","showLoginDialog","setShowConnectionDialog","className","assign","fontSize","ReactRouterLink","src","alt","App","element","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.6fde99cf.chunk.js","sourcesContent":["import { defaultTheme } from 'evergreen-ui'\nimport { merge } from 'lodash'\n\nconst appTheme = merge({}, defaultTheme, {\n  typography: {\n    fontFamilies: {\n      display: 'Lato, sans-serif',\n      ui: 'Lato, sans-serif',      \n      mono: '\"SF Mono\", monospace'\n    }\n  },\n  components: {\n    Text: {\n      baseStyle: {\n        fontFamily: 'Lato, sans-serif'\n      }\n    },\n    Heading: {\n      baseStyle: {\n        fontFamily: 'Lato, sans-serif'\n      }\n    },\n    Link: {\n      baseStyle: {\n        fontFamily: 'Lato, sans-serif'\n      }\n    }\n  }\n})\n\nexport default appTheme","import React, { Component } from \"react\";\nimport { AuthType } from \"webdav\";\n\nconst defaultValue = {\n    authType: AuthType.Basic,\n    username: '',\n    davClient: null,\n    davBaseUrl: null,\n    davApiBaseUrl: null,\n    davHomeDirectory: null, \n    connectionValid: false,\n    supportedFormats: ['JPEG', 'JPG', 'PNG', 'WEBP', 'AVIF', 'TIFF', 'TIF', 'GIF', 'SVG', 'CR2', 'DNG'],\n    filter: '',\n    filterRegExp: new RegExp('.*', 'i'),\n    filterFileItems: (filter) => { },\n    setDavClient: (client, davBaseUrl) => { },\n    getThumbApiUrl: () => { },\n    getExifApiUrl: () => { },\n    getMetadataApiUrl: () => { },\n    getAuthUrl: () => { },\n    isImageFile: () => { },\n    disconnect: () => { },\n    getUserRootDirectories: () => { }\n}\n\nconst DavConfigurationContext = React.createContext(defaultValue);\n\nclass DavConfigurationProvider extends Component {\n\n    constructor() {\n        super();\n        this.state = {\n            authType: AuthType.Basic,\n            username: '',\n            davClient: null,\n            davBaseUrl: null,\n            davApiBaseUrl: null,\n            davHomeDirectory: null,            \n            connectionValid: false,\n            showConnectionDialog: false,\n            supportedFormats: ['JPEG', 'JPG', 'PNG', 'WEBP', 'AVIF', 'TIFF', 'GIF', 'SVG', 'CR2', 'CR3', 'DNG'],\n            filter: '',\n            filterRegExp: new RegExp('.*', 'i'),\n            filterFileItems: this.filterFileItems,\n            setDavClient: this.setDavClient,\n            getThumbApiUrl: this.getThumbApiUrl,\n            getExifApiUrl: this.getExifApiUrl,\n            getMetadataApiUrl: this.getMetadataApiUrl,\n            getAuthUrl: this.getAuthUrl,\n            isImageFile: this.isImageFile,\n            disconnect: this.disconnect\n        }\n    }\n\n    filterFileItems = (value) => {\n        let valueStr = value === null || value === '' ? '.*' : value;\n        this.setState({\n            filter: value,\n            filterRegExp: new RegExp(valueStr, 'i')\n        });\n    }\n\n    setDavClient = (client, davBaseUrl, username) => {\n\n        const davBaseUri = client ? new URL(davBaseUrl) : null;\n        const proto = client ? davBaseUri.protocol : null;\n        const host = client ? davBaseUri.hostname : null;\n        const port = client ? davBaseUri.port : null;\n\n        const davApiBaseUrl = `${proto}//${host}:${port}`;\n\n        this.setState({\n            davClient: client,\n            davBaseUrl: davBaseUrl,\n            davApiBaseUrl: davApiBaseUrl,\n            connectionValid: client ? true : false,\n            username: client ? username : ''\n        });\n    }\n\n    disconnect = () => {\n        this.setDavClient(null);\n    }\n\n    getThumbApiUrl = () => {\n        return `${this.state.davApiBaseUrl}/thumb`;\n    }\n\n    getExifApiUrl = () => {\n        return `${this.state.davApiBaseUrl}/meta/exif`;\n    }\n\n    getMetadataApiUrl = () => {\n        return `${this.state.davApiBaseUrl}/meta/xmp`;\n    }\n\n    getAuthUrl = () => {\n        return `${this.state.davApiBaseUrl}/auth`;\n    }\n\n    isImageFile = (filename) => {\n        if (typeof filename === 'undefined' || filename === null) {\n            return false;\n        }\n\n        if (filename.startsWith('.')) {\n            return false;\n        }\n\n        const index = filename.lastIndexOf('.');\n        if (index < 0) {\n            return false;\n        }\n\n        const extention = filename.toUpperCase().substring(index + 1);\n\n        const formatIndex = this.state.supportedFormats.indexOf(extention);\n        return formatIndex !== -1;\n    }\n\n    render = () => {\n        return <DavConfigurationContext.Provider value={this.state}>{this.props.children}</DavConfigurationContext.Provider>\n    }\n}\n\nexport { DavConfigurationContext, DavConfigurationProvider }\n","import { Component } from 'react';\nimport { Navigate } from 'react-router';\nimport { Pane, TextInputField, Paragraph, Button, Heading, Text, Alert, LogInIcon, Combobox, Label } from 'evergreen-ui';\nimport { DavConfigurationContext } from '../AppSettings';\n\nimport { createClient, AuthType } from \"webdav\";\n\n/**\n * The login view displays the credentials input controls and authenticate the user against \n * the server credentials.\n */\nexport default class LoginView extends Component {\n    static contextType = DavConfigurationContext;\n\n    constructor() {\n        super();\n        let url = `${window.location.protocol}//${window.location.hostname}:${window.location.port}/`;\n\n        if (url === 'http://localhost:3000/') {\n            url = 'http://localhost:8080/';\n        }\n\n        this.state = {\n            isLoading: false,\n            username: '',\n            password: '',\n            url: url,\n            userRootDirs: [],\n            selectedRootDir: '',\n            errorMessage: '',\n            davContext: 'dav',\n            connectionSuccess: false\n        }\n    }\n\n    componentDidMount = () => { \n        this.setState({\n            errorMessage: '', \n        });\n    }\n\n    componentDidUpdate = (prevProps, prevState) => {\n\n        if (prevState.username !== this.state.username) {\n            this.fetchUserRootDirectories();\n        }\n\n        if (prevState.url !== this.state.url) {\n            this.fetchUserRootDirectories();\n        }\n\n        if (this.context.davClient !== null && this.context.connectionValid) {\n            this.setState({\n                connectionSuccess: true\n            });\n        }\n    }\n\n    fetchUserRootDirectories = () => {\n\n        if ('' === this.state.username) {\n            return;\n        }\n\n        // console.log(`Fetching user root directories for user: ${this.state.username}`);\n\n        const fetchOptions = { \n            method: 'GET',\n            headers: {\n                'Content-Type': 'application/json'\n            }\n        };\n\n        const fetchUrl = `${this.state.url}auth/whois/${this.state.username}`;\n        // console.log(`Fetching from: ${fetchUrl}`);\n\n        return fetch(fetchUrl, fetchOptions)\n        .then(res => {            \n            // console.log(`Received user root dirs : ${JSON.stringify(res)}`);\n            return res.json()\n        })\n        .then(userInfo => {\n            // console.log(`Found user info for: ${this.state.username}`);            \n            this.setState({\n                userRootDirs: userInfo.rootDirs,\n                errorMessage: ''\n            });\n            return userInfo.rootDirs;\n        })\n        .catch(error => {\n            console.log(`Error while fetching user's root directories: ${error}`)\n            this.setState({\n                userRootDirs: [],\n                errorMessage: 'Error while fetching your directories: check your username or the server URL.'\n            });\n        })\n    }\n\n    testConnection = async () => {\n        console.info('Testing connection ...');\n        const clientOptions = {\n            authType: AuthType.Basic,\n            username: this.state.username,\n            password: this.state.password\n        }\n\n        const clientUrl = `${this.state.url}${this.state.davContext}/${this.state.username}${this.state.selectedRootDir}`;\n\n        const client = createClient(clientUrl, clientOptions);\n        client.getDirectoryContents('/')\n            .then(contents => {\n                this.context.setDavClient(client, clientUrl, this.state.username);\n            }).catch(error => {\n                console.info(`Could not connect to webdav: ${error}`);\n                this.context.setDavClient(null, '');\n                this.setState({\n                    errorMessage: 'Something went wrong while connecting. Check your credentials and try again.',\n                    isLoading: false,\n                    connectionSuccess: false\n                });\n            });        \n    }\n\n    onConfirm = () => {\n        this.setState({\n            isLoading: true,\n            connectionSuccess: false\n        }, () => this.testConnection());\n    }\n\n    onTxtLoginChange = (evt) => {\n        this.setState({\n            username: evt.target.value\n        });\n    }\n\n    isLoginButtonDisabled = () => {\n        return null === this.state.username || '' === this.state.username\n                || null === this.state.password || '' === this.state.password\n                || '' === this.state.selectedRootDir \n                || '' !== this.state.errorMessage \n                || '' === this.state.url\n                || this.state.isLoading;\n    }\n\n    renderErrorMessage = () => {\n        return (this.state.errorMessage !== '') ? <Alert intent=\"danger\">{this.state.errorMessage}</Alert> : <></>;\n    }\n\n    renderLoginForm = () => {\n        return <Pane display=\"grid\" gridTemplateColumns=\"auto\" margin={160} padding={20} elevation={1}>\n            <Pane marginTop={-20} marginLeft={-20} marginRight={-20} marginBottom={40} padding={10} background=\"tint2\" elevation={1}>\n                <Heading is=\"h2\" textAlign=\"center\" textShadow=\"initial\">Welcome to Nico's Drive</Heading>\n            </Pane>\n\n            <form>\n            <TextInputField id=\"txt-login\"\n                disabled={this.state.isLoading}\n                value={this.state.username}\n                onChange={this.onTxtLoginChange}\n                placeholder=\"Login name...\"\n                label=\"Login:\"\n                autoComplete='username' />\n\n            <TextInputField id=\"txt-password\"\n                disabled={this.state.isLoading}\n                type=\"password\"\n                value={this.state.password}\n                onChange={e => this.setState({ password: e.target.value })}\n                placeholder=\"Password...\"\n                label=\"Password:\"\n                autoComplete='current-password' />\n\n            <Label>Online drive to connect to:</Label>\n            <Combobox\n                items={this.state.userRootDirs}\n                onChange={selected => this.setState({selectedRootDir: selected})}\n                placeholder=\"Select one online drive...\"\n                marginBottom={20}\n                label=\"Online drive to connect to:\"\n            />\n\n            <TextInputField id=\"txt-url\"\n                disabled={this.state.isLoading}\n                value={this.state.url}\n                onChange={e => this.setState({ url: e.target.value })}\n                placeholder=\"Server url...\"\n                label=\"Base server URL:\"\n                description=\"Advanced users only.\" />\n\n            <Pane>\n                {this.renderErrorMessage()}\n                <Button is=\"div\" marginTop={16} iconBefore={LogInIcon} appearance=\"primary\" intent=\"success\" onClick={() => this.onConfirm()} disabled={this.isLoginButtonDisabled()}>\n                    {this.state.isLoading ? 'Please wait...' : 'Connect'}\n                </Button>\n                <Paragraph textAlign=\"right\">\n                    <Text>Not a member ? Just kindly ask... :)</Text>\n                </Paragraph>\n            </Pane>\n            </form>\n        </Pane>\n    }\n\n    render = () => {\n        // if we have a dav client properly configured then must go to the explorer;\n        // to login again we must log out first !\n        return (this.state.connectionSuccess) ? <Navigate to='/explorer' /> : this.renderLoginForm();\n    }\n}","import { Component } from \"react\";\n\nimport { Pane, SearchInput, Position, Popover, Avatar, Menu, Badge } from 'evergreen-ui';\nimport { InfoSignIcon, LogOutIcon } from 'evergreen-ui';\n\nimport { DavConfigurationContext } from \"../AppSettings\";\n\n/**\n * The DavHeader contains the search bar for filtering currently displayed file items and the avatar menu for user information\n * It uses the context to operate on file items filtering and login information.\n */\nclass DavHeader extends Component {\n    static contextType = DavConfigurationContext;\n\n    render = () => {\n        return <Pane background=\"tint2\" display=\"grid\" gridTemplateColumns=\"1fr auto\" paddingTop={15} paddingBottom={15} paddingLeft={15} justifyItems=\"stretch\">\n            <SearchInput placeholder=\"Search something...\" width=\"75%\" justifySelf=\"center\" onChange={(e) => this.context.filterFileItems(e.target.value)} value={this.context.filter} />\n            <Popover\n                justifySelf=\"end\"\n                position={Position.BOTTOM_RIGHT}\n                content={\n                    <Menu>\n                        <Menu.Group>\n                            <Menu.Item icon={InfoSignIcon} intent=\"success\"><Badge color=\"green\">{this.context.username}</Badge></Menu.Item>\n                            <Menu.Item>{this.context.davBaseUrl}</Menu.Item>\n                        </Menu.Group>\n                        <Menu.Divider />\n                        <Menu.Group>\n                            <Menu.Item icon={LogOutIcon} intent=\"danger\" onClick={() => { this.context.disconnect() }}>\n                                Disconnect\n                            </Menu.Item>\n                        </Menu.Group>\n                    </Menu>\n                }\n            >\n                <Avatar name={this.context.username} size={32} marginLeft={15} marginRight={15} style={{ cursor: 'pointer' }} justifySelf=\"end\" />\n            </Popover>\n        </Pane>\n    }\n}\n\nexport default DavHeader;","import { Component } from 'react';\nimport { Pane, StarIcon, StarEmptyIcon } from 'evergreen-ui';\n\nexport default class RatingPane extends Component {\n\n    render = () => {\n        let stars = [];\n\n        let rating = this.props.rating ? this.props.rating : 0;\n        let maxRating = this.props.maxRating ? this.props.maxRating : 5;\n        if (maxRating < rating) {\n            maxRating = rating;\n        }\n\n        let size = this.props.size ? this.props.size : 24;\n        \n        for(let index = 0; index < rating; index++) {\n            const lightedStar = <StarIcon key={index} color=\"#FBE6A2\" size={size}/>\n            stars.push(lightedStar);\n        }\n\n        for(let index = rating; index < maxRating; index++) {\n            const unlightedStar = <StarEmptyIcon key={index} color=\"#C7CED4\" size={size}/>\n            stars.push(unlightedStar);\n        }\n\n        return <Pane display=\"inline-fex\" alignItems=\"center\">\n            {stars}\n        </Pane>\n    }\n}","import { Button, Heading, InfoSignIcon, Pane, Table, Tablist, Tab, TagInput, EmptyState } from 'evergreen-ui';\nimport { DownloadIcon, SearchIcon } from 'evergreen-ui';\n\nimport { Component } from 'react';\n\nimport RatingPane from './RatingPane';\n\nimport { DavConfigurationContext } from '../AppSettings';\n\nexport default class FileDetailsPane extends Component {\n    static contextType = DavConfigurationContext;\n\n    constructor() {\n        super();\n\n        this.state = {\n            imageData: [],\n            selectedIndex: 0,\n            tabs: ['Information', 'Image', 'Metadata']\n        }\n    }\n\n    componentDidMount = () => {\n        this.loadImageInformation();\n        this.loadMetaDataInformation();\n    }\n\n    getDownloadLink = () => {        \n        if (!this.context.connectionValid) {\n            // console.log('davClient is undefined in context. Cannot download file.');\n            return;\n        }\n\n        return this.context.davClient.getFileDownloadLink(this.props.fileItem.filename);\n    }\n\n    loadImageInformation = () => {\n        const metaUrl = this.context.getExifApiUrl();\n\n        const paths = this.context.davBaseUrl.split('/');\n        const homeDir = `/${paths[paths.length - 1]}`;\n\n        const exifRequest = {\n            \"username\": this.context.username,\n            \"homeDir\": homeDir,\n            \"filename\": this.props.fileItem.filename\n        }\n\n        fetch(metaUrl, {\n            method: 'POST',\n            body: JSON.stringify(exifRequest),\n            headers: {\n                'Content-Type': 'application/json'\n            }\n        })\n            .then(res => res.json())\n            .then(res => {\n                // console.log('Received exif for this file: ' + JSON.stringify(res));\n                this.setState({\n                    imageData: res\n                });\n            }).catch(err => {\n                console.log('Error while reading exif data: ' + err);\n                this.setState({\n                    metadata: { tags: '' }\n                });\n            });\n    }\n\n\n    loadMetaDataInformation = () => {\n        const metaUrl = this.context.getMetadataApiUrl();\n\n        const paths = this.context.davBaseUrl.split('/');\n        const homeDir = `/${paths[paths.length - 1]}`;\n\n        const metadataRequest = {\n            \"username\": this.context.username,\n            \"homeDir\": homeDir,\n            \"filename\": this.props.fileItem.filename,\n            \"raw\": false\n        }\n\n        fetch(metaUrl, {\n            method: 'POST',\n            body: JSON.stringify(metadataRequest),\n            headers: {\n                'Content-Type': 'application/json'\n            }\n        })\n            .then(res => res.json())\n            .then(res => {\n                /*\n                console.log('Received metadata for this file: ' + JSON.stringify(res));\n                console.log('Tags are: ' + res.tags);\n                */\n\n                this.setState({\n                    metadata: res\n                });\n            }).catch(err => {\n                console.log('Error while reading metadata: ' + err);\n                this.setState({\n                    metadata: { tags: '' }\n                });\n            });\n    }\n\n    renderFileItemSize = () => {\n        let unite = 'bytes';\n        let taille = this.props.fileItem.size;\n        if (taille > 1024) {\n            taille = (taille / 1024).toFixed(2);\n            unite = 'KB';\n        }\n        if (taille > 1024) {\n            taille = (taille / 1024).toFixed(2);\n            unite = 'MB';\n        }\n        if (taille > 1024) {\n            taille = (taille / 1024).toFixed(2);\n            unite = 'GB';\n        }\n\n        return <span>{taille}&nbsp;{unite}</span>\n    }\n\n    renderImageTabs = () => {\n        const isImage = this.context.isImageFile(this.props.fileItem.basename);\n        return <Pane padding={15}>\n            <Tablist marginBottom={16} flexBasis={240} marginRight={24}>\n                {this.state.tabs.filter((tab, index) => {\n                    return index > 0 ? isImage : true;\n                })\n                    .map((tab, index) => (\n                        <Tab\n                            key={tab}\n                            id={tab}\n                            onSelect={() => this.setState({ selectedIndex: index })}\n                            isSelected={index === this.state.selectedIndex}\n                            aria-controls={`panel-${tab}`}\n                        >\n                            {tab}\n                        </Tab>\n                    ))}\n            </Tablist>\n            {this.state.tabs.map((tab, index) => {\n\n                let panelTab;\n                switch (index) {\n                    case 0:\n                        panelTab = this.renderFileDetails();\n                        break;\n\n                    case 1:\n                        panelTab = this.renderImageDetails();\n                        break;\n\n                    case 2:\n                        panelTab = this.renderMetadataDetails();\n                        break;\n\n                    default:\n                        panelTab = <div />\n                }\n\n                return <Pane\n                    key={tab}\n                    id={`panel-${tab}`}\n                    role=\"tabpanel\"\n                    aria-labelledby={tab}\n                    aria-hidden={index !== this.state.selectedIndex}\n                    display={index === this.state.selectedIndex ? 'block' : 'none'}\n                >\n                    {panelTab}\n                </Pane>\n            })}\n\n        </Pane>\n    }\n\n    renderFileDetails = () => {\n        return <Table marginTop={15}>\n            <Table.Head height={32}>\n                <Table.TextHeaderCell>\n                    <Pane display=\"inline-flex\" alignItems=\"center\">\n                        <InfoSignIcon />&nbsp;File information\n                    </Pane>\n                </Table.TextHeaderCell>\n                <Table.TextHeaderCell>\n                    &nbsp;\n                </Table.TextHeaderCell>\n            </Table.Head>\n            <Table.Body>\n                <Table.Row key=\"row_path\" height={32}>\n                    <Table.TextCell>Path:</Table.TextCell>\n                    <Table.TextCell>{this.props.fileItem.filename}</Table.TextCell>\n                </Table.Row>\n                <Table.Row height={32}>\n                    <Table.TextCell key=\"row_modif\">Last modif:</Table.TextCell>\n                    <Table.TextCell>{this.props.fileItem.lastmod}</Table.TextCell>\n                </Table.Row>\n                <Table.Row height={32}>\n                    <Table.TextCell key=\"row_size\">Size:</Table.TextCell>\n                    <Table.TextCell>{this.renderFileItemSize()}</Table.TextCell>\n                </Table.Row>\n            </Table.Body>\n        </Table>\n    }\n\n    renderImageDetails = () => {\n        let rows;\n        if (typeof this.state.imageData.image === 'undefined') {\n            rows = this.renderEmptyDetails('No image information has been found.');\n        } else {\n                rows = Object.keys(this.state.imageData.image).map((key, index) => {\n                return <Table.Row key={index} height={32}>\n                    <Table.TextCell>{key}</Table.TextCell>\n                    <Table.TextCell>{this.state.imageData.image[key]}</Table.TextCell>\n                </Table.Row>\n            });\n        }\n\n        return <Table marginTop={15}>\n            <Table.Head height={32}>\n                <Table.TextHeaderCell>\n                    <Pane display=\"inline-flex\" alignItems=\"center\">\n                        <InfoSignIcon />&nbsp;Image information\n                    </Pane>\n                </Table.TextHeaderCell>\n                <Table.TextHeaderCell>\n                    &nbsp;\n                </Table.TextHeaderCell>\n            </Table.Head>\n            <Table.Body>\n                {rows}\n            </Table.Body>\n        </Table>\n    }\n\n    renderMetadataDetails = () => {\n        let rows;\n        if (typeof this.state.metadata === 'undefined' || Object.keys(this.state.metadata).length === 0) {\n            rows = this.renderEmptyDetails('Metedata details are not available.')\n        } else {\n            rows = Object.keys(this.state.metadata).map((key, index) => {\n                return <Table.Row key={`meta-${index}`} height={32}>\n                    <Table.TextCell>{key}</Table.TextCell>\n                    <Table.TextCell>{this.state.metadata[key]}</Table.TextCell>\n                </Table.Row>\n            });\n        }\n\n        return <Table marginTop={15}>\n            <Table.Head height={32}>\n                <Table.TextHeaderCell>\n                    <Pane display=\"inline-flex\" alignItems=\"center\">\n                        <InfoSignIcon />&nbsp;Metadata information\n                    </Pane>\n                </Table.TextHeaderCell>\n                <Table.TextHeaderCell>\n                    &nbsp;\n                </Table.TextHeaderCell>\n            </Table.Head>\n            <Table.Body>\n                {rows}\n            </Table.Body>\n        </Table>\n    }\n\n    renderEmptyDetails = (message) => {\n        return <EmptyState\n            background=\"dark\"\n            title=\"Not found!\"\n            orientation=\"horizontal\"\n            icon={<SearchIcon color=\"#C1C4D6\" />}\n            iconBgColor=\"#EDEFF5\"\n            description={message}\n        />\n    }\n\n    renderTags = () => {\n        const isImage = this.context.isImageFile(this.props.fileItem.basename);\n        if (!isImage) {\n            return <div>&nbsp;</div>\n        }\n\n        let placeholder = 'Loading tags info...';\n        let tags = [];\n        if (this.state.metadata) {            \n            if (typeof this.state.metadata.tags !== 'undefined') {\n                if ('' !== this.state.metadata.tags) {\n                    tags = this.state.metadata.tags.split(',');\n                } \n            }\n            placeholder = tags.length === 0 ? 'No tags for this image' : '';\n        }\n\n        return <TagInput\n            inputProps={{ placeholder: placeholder }}\n            values={tags}\n            flexGrow={2}\n            margin={15}\n            disabled={true}\n        />\n    }\n\n    getRating = () => {\n        const isImage = this.context.isImageFile(this.props.fileItem.basename);\n        if (!isImage) {\n            return 0;\n        }\n\n        if (!this.state.metadata) {\n            return 0;\n        }\n\n        if (!this.state.metadata['xmp:Rating']) {\n            return 0;\n        }\n        \n        return Number.parseInt(this.state.metadata['xmp:Rating']);\n    }\n\n    render = () => {\n        // console.log('Render file details: \\n' + JSON.stringify(this.props.fileItem));\n\n        const downloadIcon = <DownloadIcon size={24} marginRight={5}/>\n        \n        return <Pane zIndex={1} flexShrink={0} elevation={0} backgroundColor=\"white\">\n            <Pane padding={16} borderBottom=\"muted\">\n                <Heading size={600}>{this.props.fileItem.basename}</Heading>\n            </Pane>\n            <Pane display=\"inline-flex\" alignItems=\"center\">\n                <Button appearance=\"primary\" intent=\"success\" is=\"a\" margin={20} iconBefore={downloadIcon} href={this.getDownloadLink()} target=\"_blank\" disabled={!this.context.connectionValid}>Download</Button>                \n                <RatingPane rating={this.getRating()} maxRating={5} marginRight={10} marginLeft={10}/>\n            </Pane>\n            <Pane display=\"flex\" gridTemplateColumns=\"auto\">\n                {this.renderTags()}\n            </Pane>\n            <Pane>\n                {this.renderImageTabs()}\n            </Pane>\n        </Pane>\n    }\n}","\nimport { Card, Icon, Pane, DocumentIcon, Link, Text, InfoSignIcon, DownloadIcon, MoreIcon, Table, Button, Position, Popover, Menu, DeleteIcon } from 'evergreen-ui';\nimport { Component } from 'react';\nimport { DateTime } from 'luxon';\nimport { DavConfigurationContext } from '../AppSettings';\n\n\nexport default class RegularFile extends Component {\n    static contextType = DavConfigurationContext;\n\n    _capitalize = (str) => {\n        const lower = str.toLowerCase();\n        return lower.charAt(0).toUpperCase() + lower.slice(1);\n    }\n\n    download = (fileItem) => {\n        const dlLink = this.context.davClient.getFileDownloadLink(fileItem.filename);\n        window.open(dlLink, '_blank');\n    }\n\n    renderMimeType = (mimeType) => {\n        if (typeof mimeType === 'undefined') {\n            return 'File';\n        }\n\n        if (mimeType.endsWith('json')) {\n            return 'JSON';\n        }\n\n        if (mimeType.endsWith('xml')) {\n            return 'XML';\n        }\n\n        if (mimeType.startsWith('application/')) {\n            return 'File';\n        }\n\n        if (mimeType.startsWith('image/')) {\n            return this._capitalize(mimeType.substring(6));\n        }\n\n        if (mimeType.startsWith('text/')) {\n            return this._capitalize(mimeType.substring(5)) + ' Text';\n        }\n\n        return mimeType;\n    }\n\n    renderHttpDate = (httpDate) => {\n        return DateTime.fromHTTP(httpDate).toLocaleString(DateTime.DATETIME_SHORT_WITH_SECONDS);\n    }\n\n    renderFileItemSize = () => {\n        let unite = 'bytes';\n        let taille = this.props.fileItem.size;\n        if (taille > 1024) {\n            taille = (taille / 1024).toFixed(2);\n            unite = 'KB';\n        }\n        if (taille > 1024) {\n            taille = (taille / 1024).toFixed(2);\n            unite = 'MB';\n        }\n        if (taille > 1024) {\n            taille = (taille / 1024).toFixed(2);\n            unite = 'GB';\n        }\n\n        return `${taille} ${unite}`;\n    }\n\n    renderGridLabel = () => {\n        return <Pane display=\"inline-flex\" alignItems=\"center\" justifyContent=\"space-between\" width={190} height={18} margin={5}>\n                <Text overflow=\"hidden\" maxWidth={155} maxHeigh={24}>{this.props.fileItem.basename}</Text>\n                {this.renderActionMenu()}\n            </Pane>\n    }\n\n    renderGrid = () => {\n        let styleThumb = {\n            width: '200px',\n            height: '200px',\n            marginTop: '-15px',\n            display: 'flex',\n            justifyContent: 'center',\n            alignItems: 'center'\n        }\n\n        return (\n            <Card\n                elevation={2}\n                backgroundColor=\"white\"\n                width={200}\n                height={240}\n                margin={24}\n                display=\"flex\"\n                justifyContent=\"center\"\n                alignItems=\"center\"\n                flexDirection=\"column\"\n            >\n                <Pane style={styleThumb} background=\"tint2\">\n                    <Icon icon={DocumentIcon} size={48} color=\"success\" />\n                </Pane>\n\n                {this.renderGridLabel()}\n            </Card>\n        );\n    }\n\n    renderActionMenu = () => {\n        return <Popover\n            position={Position.BOTTOM_RIGHT}\n            content={\n                <Menu>\n                    <Menu.Group>\n                        <Menu.Item icon={InfoSignIcon} intent=\"info\" onSelect={() => { this.props.handleShowDetails(this.props.fileItem) }}>Details...</Menu.Item>\n                        <Menu.Item icon={DownloadIcon} intent=\"success\" onSelect={() => { this.download(this.props.fileItem)} }>Download...</Menu.Item>\n                    </Menu.Group>\n                    <Menu.Group>\n                        <Menu.Item icon={DeleteIcon} intent=\"danger\" onSelect={() => { this.props.handleDelete(this.props.fileItem)} }>Delete</Menu.Item>\n                    </Menu.Group>\n                </Menu>\n            }            \n        >\n            <Button appearance=\"minimal\" intent=\"none\" boxShadow=\"none\" border=\"none\" marginTop={5} marginRight={0} marginBottom={5} marginLeft={0} maxHeight={24} maxWidth={24} padding={0} width={24} height={24}><MoreIcon size={16}/></Button>\n        </Popover>\n    }\n\n    renderTable = () => {\n        return <Table.Row key={this.props.fileItem.basename} isSelectable height={32}>\n            <Table.TextCell textAlign=\"center\" maxWidth={48}>\n                <DocumentIcon size={16} />\n            </Table.TextCell>\n            <Table.TextCell textAlign=\"left\">\n                <Link href={this.context.davClient.getFileDownloadLink(this.props.fileItem.filename)} target=\"_blank\" borderBottom=\"none\">\n                    {this.props.fileItem.basename}\n                </Link>\n            </Table.TextCell>\n            <Table.TextCell textAlign=\"left\">\n                {this.renderMimeType(this.props.fileItem.mime)}\n            </Table.TextCell>\n            <Table.TextCell textAlign=\"left\">\n                {this.renderFileItemSize()}\n            </Table.TextCell>\n            <Table.TextCell textAlign=\"left\">\n                {this.renderHttpDate(this.props.fileItem.lastmod)}\n            </Table.TextCell>\n            <Table.TextCell textAlign=\"center\">\n                {this.renderActionMenu()}\n            </Table.TextCell>\n        </Table.Row>\n    }\n\n    render = () => {\n        switch (this.props.displayMode) {\n            case 'grid':\n                return this.renderGrid();\n\n            case 'table':\n                return this.renderTable();\n\n            default:\n                console.log(`Invalid display mode: ${this.props.displayMode}. Using grid as a default.`);\n                return this.renderGrid();\n        }\n    }\n}","\nimport { Card, Pane, Link, Table, Popover, Position, Menu, Button } from 'evergreen-ui';\nimport { Icon, DeleteIcon, MoreIcon, FolderCloseIcon } from 'evergreen-ui';\n\nimport RegularFile from './RegularFile';\n\nexport default class Folder extends RegularFile {\n\n    renderActionMenu = () => {\n        return <Popover\n            position={Position.BOTTOM_RIGHT}\n            content={\n                <Menu>\n                    <Menu.Group>\n                        <Menu.Item icon={DeleteIcon} intent=\"danger\" onSelect={() => { this.props.handleDelete(this.props.fileItem)} }>Delete</Menu.Item>\n                    </Menu.Group>\n                </Menu>\n            }            \n        >\n            <Button appearance=\"minimal\" intent=\"none\" boxShadow=\"none\" border=\"none\" margin={5} maxHeight={24} maxWidth={24} padding={0} width={24} height={24}><MoreIcon size={16}/></Button>\n        </Popover>\n    }\n\n    renderGrid = () => {\n        let styleThumb = {\n            width: '200px',\n            height: '200px',\n            marginTop: '-15px',\n            display: 'flex',\n            justifyContent: 'center',\n            alignItems: 'center'\n        }\n\n        return (\n            <Card\n                elevation={2}\n                backgroundColor=\"white\"\n                width={200}\n                height={240}\n                margin={24}\n                display=\"flex\"\n                justifyContent=\"center\"\n                alignItems=\"center\"\n                flexDirection=\"column\"\n            >   \n                <Link href=\"#\" onClick={(evt) => this.props.handleNavigate(this.props.fileItem.basename)} borderBottom=\"none\">             \n                    <Pane style={styleThumb} background=\"tint2\">\n                        <Icon icon={FolderCloseIcon} size={48} color=\"#F7D154\" />\n                    </Pane>\n                    {this.renderGridLabel()}                  \n                </Link>\n            </Card>\n        );\n    }\n\n    renderTable = () => {\n        return <Table.Row key={this.props.fileItem.basename} isSelectable justifyContent=\"space-between\" height={32}>\n              <Table.TextCell textAlign=\"center\" maxWidth={48}>\n                <FolderCloseIcon color=\"#F7D154\" size={16}/>\n              </Table.TextCell>\n              <Table.TextCell textAlign=\"left\">\n                  <Link href=\"#\" onClick={(evt) => this.props.handleNavigate(this.props.fileItem.basename)} borderBottom=\"none\">                  \n                  {this.props.fileItem.basename}\n                  </Link>\n                </Table.TextCell>\n                <Table.TextCell textAlign=\"left\">\n                    Folder\n                </Table.TextCell>\n                <Table.TextCell textAlign=\"left\">\n                    &nbsp;                    \n                </Table.TextCell>\n                <Table.TextCell textAlign=\"left\">\n                    {this.renderHttpDate(this.props.fileItem.lastmod)}\n                </Table.TextCell>\n                <Table.TextCell textAlign=\"center\">\n                    {this.renderActionMenu()}\n                </Table.TextCell>\n            </Table.Row>\n    }\n}","\nimport { Card, Link, Pane, Table, Spinner } from 'evergreen-ui';\n\nimport RegularFile from './RegularFile';\n\nimport { DavConfigurationContext } from '../AppSettings';\n\nexport default class Image extends RegularFile {\n    static contextType = DavConfigurationContext;\n\n    constructor() {\n        super();\n        this.state = {\n            thumb: null\n        }\n    }\n\n    componentDidMount = () => {\n        this.setState({\n            thumb: null\n        }, () => this.generateThumb());\n    }\n\n    generateThumb = () => {\n        const paths = this.context.davBaseUrl.split('/');\n        const homeDir = `/${paths[paths.length - 1]}`;\n\n        const req = {\n            \"username\": this.context.username,\n            \"homeDir\": homeDir,\n            \"filename\": this.props.fileItem.filename\n        }\n\n        const that = this;\n        fetch(this.context.getThumbApiUrl(), { \n            method: 'POST',\n            body: JSON.stringify(req),\n            headers: {\n                'Content-Type': 'application/json'\n            }\n        })\n        .then(res => res.blob())\n        .then(res => {\n            var reader = new FileReader();\n            reader.readAsDataURL(res);\n            reader.onloadend = function() {\n                var base64data = reader.result;\n\n                // put that into state\n                that.setState(prev => {\n                    return {\n                        thumb: base64data\n                    }\n                });   \n            }                   \n        })\n        .catch(err => console.log(`Could not generate thumb for file ${this.props.fileItem.filename}\\nReason: ${err}`));\n    }\n\n    renderGridThumb = () => {        \n        if (this.state.thumb !== null) {\n            const imgUrl = 'url(' + this.state.thumb + ')';\n            const styleThumb = {\n                backgroundImage: imgUrl,\n                backgroundPosition: 'center',\n                backgroundSize: 'cover',\n                width: '200px',\n                height: '200px',\n                marginTop: '-15px'\n            }             \n            return <div style={styleThumb}>&nbsp;</div>\n        } else {\n            return <Pane display=\"flex\" alignItems=\"center\" justifyContent=\"center\" height={200}>\n                       <Spinner />\n                   </Pane>\n        } \n    }\n\n    renderGrid = () => {\n        return (\n            <Card\n                elevation={2}\n                backgroundColor=\"white\"\n                width={200}\n                height={240}\n                margin={24}\n                display=\"flex\"\n                justifyContent=\"center\"\n                alignItems=\"center\"\n                flexDirection=\"column\"\n            > \n                {this.renderGridThumb()}\n                {this.renderGridLabel()}\n            </Card>\n        );\n    }\n\n    renderTableThumb = () => {\n        if (this.state.thumb !== null) {\n            const imgUrl = 'url(' + this.state.thumb + ')';\n            const styleThumb = {\n                backgroundImage: imgUrl,\n                backgroundPosition: 'center',\n                backgroundSize: 'cover',\n                width: '24px',\n                height: '20px',\n                margin: '0px'\n            }\n            return <div style={styleThumb}>&nbsp;</div>\n        } else {\n            return <Pane display=\"flex\" alignItems=\"center\" justifyContent=\"center\" height={24} width={24} padding={0} margin={0}>\n                       <Spinner height={16} width={16} />\n                   </Pane>\n        }\n    }\n\n    renderTable = () => {\n        return <Table.Row key={this.props.fileItem.basename} isSelectable justifyContent=\"space-between\" height={32}>\n              <Table.TextCell textAlign=\"center\" maxWidth={48}>\n                {this.renderTableThumb()}\n              </Table.TextCell>\n              <Table.TextCell textAlign=\"left\">\n                  <Link href={this.context.davClient.getFileDownloadLink(this.props.fileItem.filename)} target=\"_blank\" borderBottom=\"none\">\n                      {this.props.fileItem.basename}\n                  </Link>                \n                </Table.TextCell>\n                <Table.TextCell textAlign=\"left\">\n                    {this.renderMimeType(this.props.fileItem.mimeType)}\n                </Table.TextCell>\n                <Table.TextCell textAlign=\"left\">\n                    {this.renderFileItemSize()}\n                </Table.TextCell>\n                <Table.TextCell textAlign=\"left\">\n                    {this.renderHttpDate(this.props.fileItem.lastmod)}\n                </Table.TextCell>\n              <Table.TextCell textAlign=\"center\">\n                  {this.renderActionMenu()}\n              </Table.TextCell>\n            </Table.Row>\n    }\n}","import { Component } from \"react\"\nimport { EmptyState, Pane, Table, Dialog, Text, Button } from \"evergreen-ui\";\nimport { Spinner, SearchIcon } from \"evergreen-ui\";\n\nimport Folder from './Folder';\nimport Image from './Image';\nimport RegularFile from \"./RegularFile\";\n\nimport { DavConfigurationContext } from '../AppSettings';\n\n/**\n * Component to display the directory content (based on two props : folders and files) either by displaying a list of files \n * or a grid with thumbnails. The user choose how to display directory contents using the displayMode property.\n */\nexport default class DavDirectoryPane extends Component {\n    static contextType = DavConfigurationContext;\n\n    constructor() {\n        super();\n        this.state = {\n            files: [],\n            folders: [],\n            currentRegExp: '',\n            isDeleteDialogShown: false,\n            fileItemToDelete: null\n        }\n    }\n\n    componentDidUpdate = (prevProps) => {\n        // if the folders and files have changed we need to filter them out. If not, we do not change anything.\n        // same for the filter expression : if it changed, then refilter and update\n        let shouldUpdateState = false;\n\n        let folders = this.state.folders;\n        if (prevProps.folders !== this.props.folders || this.state.currentRegExp !== this.context.filterRegExp) {\n            folders = this.props.folders.filter(folder => folder.basename.search(this.context.filterRegExp) !== -1);\n            shouldUpdateState = true;\n        }\n\n        let files = this.state.files;\n        if (prevProps.files !== this.props.files || this.state.currentRegExp !== this.context.filterRegExp) {\n            files = this.props.files.filter(file => file.basename.search(this.context.filterRegExp) !== -1);\n            shouldUpdateState = true;\n        }        \n\n        if (shouldUpdateState) {\n            this.setState({\n                folders: folders,\n                files: files,\n                currentRegExp: this.context.filterRegExp\n            });\n        }        \n    }\n\n    /**\n     * Ensure filter is cleared out before navigating to a new folder\n     */\n    navigate = (folderName) => {\n        this.setState({\n            filter: '',\n            filterRegExp: new RegExp('.*', 'i')\n        }, () => { this.props.handleNavigate(folderName) }\n        );\n    }\n\n    /**\n     * Handles the file item delete click on each displayed file in this directory pane.\n     * This function sets the file item to delete and shows the confirm dialog to delete the file item.\n     * @param fileItem to delete\n     */\n    delete = (fileItem) => {\n        this.setState({\n            isDeleteDialogShown: true,\n            fileItemToDelete: fileItem\n        });\n    }\n\n    doDelete = () => {\n        this.setState({\n            isDeleteDialogShown: false\n        }, () => {\n            this.props.handleDeleteFileItem(this.state.fileItemToDelete)\n        });\n    }\n\n    renderFolders = () => {\n        return this.state.folders\n            .map((directory, index) => {\n            return <Folder key={'dir_' + index} \n                           fileItem={directory} \n                           displayMode={this.props.displayMode}\n                           handleNavigate={this.navigate} \n                           handleShowDetails={this.props.handleShowDetails}\n                           handleDelete={this.delete} />\n        });\n    }\n\n    renderFiles = () => {\n        return this.state.files\n            .map((file, index) => {\n            if (this.context.isImageFile(file.basename)) {\n                return <Image key={'file_' + index} \n                              fileItem={file}\n                              displayMode={this.props.displayMode}\n                              handleShowDetails={this.props.handleShowDetails} \n                              handleDelete={this.delete} />\n            } else {\n                return <RegularFile key={'file_' + index} \n                                    fileItem={file}\n                                    displayMode={this.props.displayMode} \n                                    handleShowDetails={this.props.handleShowDetails} \n                                    handleDelete={this.delete} />\n            }\n        });\n    }  \n\n    renderLoadingState = () => {\n        return <EmptyState\n            background=\"light\"\n            title=\"Loading...\"\n            orientation=\"horizontal\"\n            icon={<Spinner color=\"#C1C4D6\" />}\n            iconBgColor=\"#EDEFF5\"\n            description=\"This can take some time depending of the number of folders and files contained in this directory.\"\n        />\n    }\n\n    renderNothingFound = () => {\n        return <EmptyState\n            background=\"dark\"\n            title=\"Not found!\"\n            orientation=\"horizontal\"\n            icon={<SearchIcon color=\"#C1C4D6\" />}\n            iconBgColor=\"#EDEFF5\"\n            description=\"Nothing matches your search terms. Try something less restrictive?\"\n        />\n    }\n\n    renderEmptyState = () => {\n        return <EmptyState\n            background=\"light\"\n            title=\"Empty directory!\"\n            orientation=\"horizontal\"\n            icon={<SearchIcon color=\"#C1C4D6\" />}\n            iconBgColor=\"#EDEFF5\"\n            description=\"It's lonely here... Upload some file here!\"\n        />\n    }\n\n    renderFoldersAndFiles = () => {\n        if (this.state.folders.length === 0 && this.state.files.length === 0) {\n            return this.context.filter === '' ? this.renderEmptyState() : this.renderNothingFound();\n        }\n\n        return <>\n            {this.renderFolders()}\n            {this.renderFiles()}\n        </>\n    }\n\n    renderDirectoryContentsGrid = () => {\n        return <Pane display=\"flex\" flexWrap=\"wrap\" justifyContent=\"space-evenly\" background=\"overlay\">\n                 { this.props.loading ? this.renderLoadingState() : this.renderFoldersAndFiles() }\n            </Pane>\n    }\n\n    renderDirectoryContentsTable = () => {\n        return <Table>\n            <Table.Head height={32}>\n                <Table.TextHeaderCell textAlign=\"center\" maxWidth={48}>&nbsp;</Table.TextHeaderCell>\n                <Table.TextHeaderCell textAlign=\"left\">Name</Table.TextHeaderCell>\n                <Table.TextHeaderCell textAlign=\"left\">Type</Table.TextHeaderCell>\n                <Table.TextHeaderCell textAlign=\"left\">Size</Table.TextHeaderCell>\n                <Table.TextHeaderCell textAlign=\"left\">Modified</Table.TextHeaderCell>\n                <Table.TextHeaderCell textAlign=\"center\">Actions</Table.TextHeaderCell>\n            </Table.Head>\n        <Table.Body>\n            { this.props.loading ? this.renderLoadingState() : this.renderFoldersAndFiles() }\n        </Table.Body>\n      </Table>\n    }\n\n    renderDeleteConfirmDialog = () => {\n        return <Dialog\n                isShown={this.state.isDeleteDialogShown}\n                title=\"Warning: please confirm...\"\n                intent=\"danger\"\n                onCloseComplete={() => this.setState({isDeleteDialogShown: false})}\n                hasFooter={false}\n            >\n                <Text>\n                    Are you sure you want to delete this file? <br />\n                    {this.state.fileItemToDelete === null ? 'null' : this.state.fileItemToDelete.filename}\n                </Text>\n                <br />\n                <Text intent=\"danger\" appearance=\"primary\">This cannot be undone.</Text>\n                <Pane width=\"100%\" display=\"flex\" justifyContent=\"right\" marginTop={15}>\n                    <Button is=\"div\" marginLeft={0} marginRight={12} appearance=\"default\" intent=\"none\" onClick={(evt) => this.setState({isDeleteDialogShown: false})}>Cancel</Button>\n                    <Button is=\"div\" marginLeft={12} marginRight={0} appearance=\"primary\" intent=\"danger\" onClick={(evt) => this.doDelete()}>Confirm delete</Button>\n                </Pane>\n            </Dialog>\n    }\n\n    render = () => {\n        let directoryContents;\n        switch (this.props.displayMode) {\n            case 'grid': \n                directoryContents = this.renderDirectoryContentsGrid();\n                break;\n\n            case 'table':\n                directoryContents = this.renderDirectoryContentsTable();\n                break;\n\n            default:\n                console.log(`Invalid display mode ${this.props.displayMode}. Using grid as a default.`);\n                directoryContents = this.renderDirectoryContentsGrid();\n                break;\n        }\n\n        return <>\n            {this.renderDeleteConfirmDialog()}\n            {directoryContents}\n        </>;\n    }\n}","import { Component } from \"react\";\nimport { ChevronRightIcon, HomeIcon } from 'evergreen-ui';\nimport { Pane, Link } from 'evergreen-ui';\n\nexport default class DavBreadCrumb extends Component {\n\n    render = () => {\n        let path = this.props.currentDirectory;\n\n        const chevronIcon = <ChevronRightIcon size={18} marginLeft={5} marginRight={5} />\n        const homeIcon = <HomeIcon size={18} marginLeft={5} marginRight={5} />\n\n        let currentDirs = path === '/' ? [''] : path.split('/');\n        let navDirs = [];\n        let breadCrumb = currentDirs.map((dir, index) => {\n            const icon = index === 0 ? homeIcon : chevronIcon;\n            navDirs.push(dir);\n            const fullPath = navDirs.join('/');\n            return <Link href=\"#\" display=\"flex\" alignItems=\"center\" borderBottom=\"none\" key={index + 1} onClick={() => {                \n                this.props.handleNavigate(dir === '' ? '/' : fullPath);\n            }}>{icon}{dir}</Link>\n        });\n\n        return <Pane display=\"flex\" padding={8} background=\"tint2\">\n            {breadCrumb}\n        </Pane>\n    }\n}","import { Component } from \"react\";\n\nimport { Button, Text, toaster } from \"evergreen-ui\";\nimport { UploadIcon, Spinner } from \"evergreen-ui\";\n\nimport { DavConfigurationContext } from '../AppSettings';\n\nexport default class DavUploadButton extends Component {\n    static contextType = DavConfigurationContext;\n\n    constructor() {\n        super();\n        this.state = {\n            currentUploads: []\n        };\n    }\n\n    uploadFile = async () => {\n        const handles = await window.showOpenFilePicker({multiple: true});\n        this.setState({\n            currentUploads: handles\n        }, () => this.doUploadFiles(handles));\n    }\n\n    doUploadFiles = async (handles) => {\n        for(const handle of handles) {\n            const file = await handle.getFile();\n            const targetFileName = `${this.props.currentDirectory}/${file.name}`;\n            console.log(`Target file name is: ${targetFileName}`);\n\n            // tester si le fichier existe déja et s'il faut l'ecraser.\n\n            const uploadOption = {\n                contentLength: file.size\n            }\n\n            this.context.davClient.putFileContents(targetFileName, file, uploadOption)\n            .then(result => {\n                if (!result) {\n                    toaster.danger(`File upload problem for ${targetFileName}`);\n                } else {\n                    // do a refresh of the current directory !\n                    this.props.handleNavigate(this.props.currentDirectory);\n                }\n            }).catch(error => {\n                toaster.danger(`Problem while uploading file ${targetFileName}: ${error}`);\n            }).finally( () => {\n                const index = this.state.currentUploads.indexOf(handle);\n                if (index >= 0) {\n                    this.state.currentUploads.splice(index, 1);\n                    this.setState({\n                        currentUploads: this.state.currentUploads\n                    });\n                } else {\n                    console.log(`Did not find handle of ${handle.file.name}`);\n                }\n            });\n        }\n    }\n\n    render = () => {\n        let status = <></>\n        if (this.state.currentUploads.length > 0) {\n            status = <>\n                <Spinner size={12} marginRight={5}/>\n                <Text>{this.state.currentUploads.length} files uploading.</Text>\n            </>\n        }\n        return <>\n            {status}\n            <Button is=\"div\" marginLeft={12} marginRight={12} iconBefore={UploadIcon} appearance=\"primary\" intent=\"success\" onClick={(evt) => this.uploadFile()}>Upload</Button>\n        </>        \n    }\n}","\nimport { Component } from 'react';\nimport { Popover, Pane, Text, TextInput, Button, FolderNewIcon, Checkbox } from 'evergreen-ui';\nimport { DavConfigurationContext } from '../AppSettings';\n\nexport default class DavNewFolderButton extends Component {\n    static contextType = DavConfigurationContext;\n\n    constructor() {\n        super();\n        this.state = {\n            newFolderName: '',\n            moveToFolder: true\n        }\n    }\n\n    createFolder = async () => {\n        const newDir = `${this.props.currentDirectory}/${this.state.newFolderName}`;\n        await this.context.davClient.createDirectory(newDir);\n        this.setState({\n            newFolderName: '',\n            popoverShown: false\n        }, () => {\n            const destDir = this.state.moveToFolder ? newDir : this.props.currentDirectory;\n            this.props.handleNavigate(destDir);\n        });\n    }\n\n    render = () => {\n        return <Popover\n        content={({ close }) => {\n          return <Pane\n            padding={20}\n            display=\"grid\"\n            alignItems=\"left\"\n            justifyContent=\"left\"\n            gridTemplateColumns=\"auto auto\"\n            gridTemplateRows=\"auto auto auto\"\n          >\n            <Text gridColumnStart=\"1\" gridColumnEnd=\"span 2\">New folder name:</Text>\n            <TextInput gridColumnStart=\"1\" gridColumnEnd=\"span 2\" width=\"100%\" marginTop={5} value={this.state.newFolderName} onChange={(evt) => this.setState({newFolderName: evt.target.value})} />\n            <Checkbox gridColumnStart=\"1\" gridColumnEnd=\"span 2\" width=\"100%\" marginTop={5} disabled={this.state.newFolderName === ''} label=\"Move to new folder afer create\" checked={this.state.moveToFolder} onChange={(evt) => this.setState({moveToFolder: !this.state.moveToFolder})} />\n            <Button is='div' marginTop={10} marginRight={5} alignSelf=\"left\" appearance='primary' intent='info' disabled={this.state.newFolderName === ''} onClick={evt => this.createFolder()}>Create</Button>\n            <Button is=\"div\" marginTop={10} marginLeft={5} alignSelf=\"right\" appearance='default' intent='none' onClick={close}>Close</Button>\n          </Pane>\n        }}>\n        <Button is=\"div\" marginLeft={12} marginRight={12} iconBefore={FolderNewIcon} appearance=\"primary\" intent=\"info\">New folder</Button>\n      </Popover>\n    }\n}","import React, { Component, Fragment } from \"react\";\n\nimport { Pane, Link } from \"evergreen-ui\";\nimport { GridViewIcon, ListIcon } from \"evergreen-ui\";\n\nimport { DavConfigurationContext } from '../AppSettings';\n\nimport DavBreadCrumb from \"./DavBreadCrumb\";\nimport DavUploadButton from \"./DavUploadButton\";\nimport DavNewFolderButton from \"./DavNewFolderButton\";\n\nexport default class DavToolBar extends Component {\n    static contextType = DavConfigurationContext;\n\n    createDirectory = (name) => {\n        // use this :\n        // await client.createDirectory(\"/data/system/storage\");\n    }\n\n    renderFolderTools = () => {\n        return <>\n            <DavUploadButton currentDirectory={this.props.currentDirectory} handleNavigate={this.props.handleNavigate}/>\n            <DavNewFolderButton currentDirectory={this.props.currentDirectory} handleNavigate={this.props.handleNavigate} />\n        </>\n    }\n\n    renderDisplayTools = () => {        \n        return <Fragment>\n            <Link href=\"#\" display=\"flex\" alignItems=\"center\" onClick={(evt) => this.props.handleDisplayMode('grid')} >\n                <GridViewIcon size={18} marginLeft={5} marginRight={5} color={this.props.displayMode === 'grid' ? 'gray600' : 'blue600'} />\n            </Link>\n            &nbsp;\n            <Link href=\"#\" display=\"flex\" alignItems=\"center\" onClick={(evt) => this.props.handleDisplayMode('table')} >\n                <ListIcon size={18} marginLeft={5} marginRight={5} color={this.props.displayMode === 'table' ? 'gray600' : 'blue600'} />\n            </Link>            \n        </Fragment>\n    }\n\n    render = () => {\n        return <Pane zIndex={1} flexShrink={0} background=\"tint2\" display=\"grid\" gridTemplateColumns=\"auto 1fr\" paddingBottom={10}>                                \n                <DavBreadCrumb handleNavigate={this.props.handleNavigate} currentDirectory={this.props.currentDirectory} />\n                <Pane justifySelf=\"end\" display=\"inline-flex\" alignItems=\"center\">\n                    {this.renderFolderTools()}\n                    {this.renderDisplayTools()}\n                </Pane>\n            </Pane>\n    }\n}","const Tree = ({children}) => {\n    return (\n    <div style={{paddingTop: '10px'}}>{children}</div>\n    );\n} \n\nexport default Tree;","\nimport React, {Component} from 'react';\n\nimport { Text, ChevronDownIcon, ChevronRightIcon, FolderCloseIcon } from 'evergreen-ui';\nimport { Icon, FolderOpenIcon } from 'evergreen-ui';\nimport { DavConfigurationContext } from '../../AppSettings';\n\nconst styles = {\n    folderLabel: {\n        display: 'grid',\n        justifyItems: 'start',\n        gridTemplateColumns: 'auto auto 1fr',\n        span: {\n          marginLeft: '5px'\n        },\n        fontFamily: 'Lato'\n    },\n    collapsibleOpen: {\n        height: 'auto',\n        overflow: 'hidden',\n        paddingLeft: '20px'\n    },\n    collapsibleClosed: {\n        height: '0px',\n        overflow: 'hidden',\n        paddingLeft: '20px'\n    }\n  }\n\nclass TreeFolder extends Component {\n  static contextType = DavConfigurationContext;\n\n  constructor() {\n    super();\n    this.state = {\n      isOpen: false,\n      subDirs: []\n    }\n  }\n\n  componentDidUpdate = (prevProps, prevState, snapshot) => {\n    if (this.props.currentDirectory === null || typeof this.props.currentDirectory === 'undefined') {\n      return;\n    }\n    \n    // detect a current directory change\n    if (prevProps.currentDirectory !== this.props.currentDirectory) {\n      // detect if we jumped into this tree folder directory to refresh its contents\n      // that may have changed folowing a directory create or delete operation but only if we are 'open' state\n      if (this.props.currentDirectory === this.props.absolutePath && this.state.isOpen) {\n        this.getDirectoryContents();\n      } else {\n        // if we create a folder and jumped into that new folder, we want to refresh the parent folder as well\n        // to show the newly created folder.\n        const lastIndex = this.props.currentDirectory.lastIndexOf('/');\n        const parentFolder = this.props.currentDirectory.substring(0, lastIndex);\n        if (this.props.absolutePath === parentFolder && this.state.isOpen) {\n          this.getDirectoryContents();\n        }\n      }\n    } \n  }\n\n  getDirectoryContents = async () => {\n    let dirs = [];\n\n    if (this.context.connectionValid) {\n        const directoryItems = await this.context.davClient.getDirectoryContents(this.props.absolutePath);\n        dirs = directoryItems.filter(item => { return item.type === 'directory' });\n\n        this.setState({\n          subDirs: dirs\n        });\n    }\n  }\n\n  handleToggle = (evt) => {\n    this.setState({\n      isOpen: !this.state.isOpen\n    }, () => {\n      if (this.state.isOpen && this.state.subDirs.length === 0) {\n        this.getDirectoryContents();\n      }\n    });\n  }\n\n  handleClick = (evt) => {\n    if (this.state.subDirs.length === 0) {\n      this.getDirectoryContents();\n      this.setState({\n        isOpen: true\n      });\n    }\n\n    this.props.handleNavigate(this.props.absolutePath);\n  }\n\n  renderSubDirectories = () => {\n    return this.state.subDirs.map((dir, index) => {\n      return <TreeFolder key={`${this.props.id}-${index}`} basename={dir.basename} absolutePath={`${this.props.absolutePath}/${dir.basename}`} handleNavigate={this.props.handleNavigate} currentDirectory={this.props.currentDirectory}/>\n    });\n  }\n\n  render = () => {\n    \n    const plusIcon = this.state.isOpen ? ChevronDownIcon : ChevronRightIcon;\n    const folderIcon = this.state.isOpen ? FolderOpenIcon : FolderCloseIcon;\n\n    return <div>\n              <div style={styles.folderLabel}>\n                <Icon onClick={this.handleToggle} icon={plusIcon} size={16} marginRight=\"10\" cursor=\"pointer\"/>\n                <div style={styles.folderLabel} onClick={this.handleClick}>\n                  <Icon icon={folderIcon} size={16} color=\"#F7D154\" cursor=\"pointer\"/>\n                  <Text style={styles.folderLabel.span} cursor=\"pointer\">{this.props.basename}</Text>\n                </div>\n              </div>\n              <div style={this.state.isOpen ? styles.collapsibleOpen : styles.collapsibleClosed}>\n                {this.renderSubDirectories()}\n              </div>\n            </div>\n  }\n}\n\nexport default TreeFolder;","\nimport { Component } from \"react\";\nimport { Pane, Heading } from 'evergreen-ui';\n\nimport Tree from './tree/Tree';\nimport TreeFolder from './tree/TreeFolder';\n\nclass DavSideBar extends Component {\n    render = () => {\n        return <Pane background=\"blueTint\" elevation={0} padding={15} display=\"grid\" gridTemplateRows=\"auto auto 1fr\" gridTemplateColumns=\"auto\" overflowX=\"scroll\" height=\"100%\">  \n            <Pane background=\"blueTint\">\n                <Heading size={900} color=\"neutral\" textAlign=\"left\">My files</Heading>\n            </Pane>\n            <Pane background=\"blueTint\" marginTop={15}>\n                <Heading size={600} color=\"neutral\" textAlign=\"left\">File manager</Heading>\n            </Pane>\n            <Tree>\n                {this.props.rootDirs.map((dir, index) => {\n                    return <TreeFolder key={`treefolder-${index}`} id={`treefolder-${index}`} absolutePath={`/${dir.basename}`} basename={dir.basename} handleNavigate={this.props.handleNavigate} currentDirectory={this.props.currentDirectory} />\n                })}\n            </Tree>\n        </Pane>\n    }\n}\n\nexport default DavSideBar;","\nimport { Component } from 'react';\nimport { Navigate } from 'react-router';\n\nimport { Pane, SideSheet, Heading, Spinner } from 'evergreen-ui';\n\nimport { DavConfigurationContext } from '../AppSettings';\n\nimport DavHeader from '../components/DavHeader';\nimport FileDetailsPane from '../components/FileDetailsPane';\nimport DavDirectoryPane from '../components/DavDirectoryPane';\nimport DavToolBar from '../components/DavToolBar';\nimport DavSideBar from '../components/DavSideBar';\n\n/**\n * The DAV Explorer Pane is the main view component. It composes the page and has functions to interact with\n * the DAV Client. It uses sub components such as DavToolBar and DavDirectoryPane to render things returned \n * by the DavClient.\n */\nexport default class DavExplorerView extends Component {\n    static contextType = DavConfigurationContext;\n\n    constructor() {\n        super();\n\n        this.state = {\n            currentDirectory: null,\n            directories: [],\n            files: [],\n            rootDirs: [],\n            showDetails: false,\n            displayMode: 'table',\n            loading: true\n        }\n    }\n\n    componentDidMount = () => {\n        if (this.state.currentDirectory === null) {\n            this.setState({\n                currentDirectory: '/',\n                loading: true\n            }, () => this.doGetDirectoryContents());\n        }\n    }\n\n    getDirectoryContents = () => {\n        this.setState({\n            loading: true\n        }, () => this.doGetDirectoryContents());\n    }\n\n    doGetDirectoryContents = async () => {\n        let dirs = [];\n        let files = [];\n\n        if (this.context.connectionValid) {\n            const directoryItems = await this.context.davClient.getDirectoryContents(this.state.currentDirectory);\n\n            dirs = directoryItems.filter(item => { return item.type === 'directory' });\n            files = directoryItems.filter(item => { return item.type === 'file' });\n\n            if ('/' === this.state.currentDirectory) {\n                this.setState({\n                    rootDirs: dirs\n                });\n            }\n        } else {\n            console.error('Cannot get directory contents since connectin is not valid.');\n        }\n\n        this.setState({\n            directories: dirs,\n            files: files,\n            loading: false\n        });\n    }\n\n    navigate = (folderName) => {\n        const separator = this.state.currentDirectory.endsWith('/') || folderName.startsWith('/') ? '' : '/';\n        let newDir = this.state.currentDirectory + separator + folderName;\n        this.setState((prev) => {\n            return {\n                currentDirectory: newDir,\n                files: [],\n                directories: []\n            }\n        }, () => {\n            console.log(`Navigated to ${newDir}, now get directory contents...`);\n            this.getDirectoryContents();\n        });\n    }\n\n    navigateAbsolute = (absolutePath) => {\n        this.setState((prev) => {\n            return {\n                currentDirectory: absolutePath,\n                files: [],\n                directories: []\n            }\n        }, () => {\n            console.log(`Absolute navigated to ${absolutePath}, now get directory contents...`);\n            this.getDirectoryContents();\n        });\n    }\n\n    toggleFileDetails = (fileItem) => {\n        let modified = fileItem;\n        if (modified.filename.startsWith(this.context.homeDirectory)) {\n            modified.filename = modified.filename.substring(this.context.homeDirectory.length);\n        }\n\n        this.setState({\n            showDetails: true,\n            detailedFileItem: modified\n        });\n    }\n\n    changeDisplayMode = (displayMode) => {\n        this.setState({\n            displayMode: displayMode\n        });\n    }\n\n    deleteFileItem = (fileItem) => {\n        this.context.davClient.deleteFile(fileItem.filename)\n        .then(this.getDirectoryContents());\n    }\n\n    render = () => {\n\n        if (!this.context || !this.context.connectionValid) {\n            return <Navigate to=\"/login\" />\n        }\n\n        if (!this.state.currentDirectory) {\n            return <Pane gridTemplateColumns=\"auto\">\n                <Spinner marginX=\"auto\" marginTop={120} />\n                <Heading size={600} marginX=\"auto\" marginTop={15} textAlign=\"center\">Nico's Drive is loading...</Heading>\n            </Pane>\n        }\n\n        return <Pane display=\"grid\" gridTemplateColumns=\"1fr 4fr\" height=\"100vh\" maxHeight=\"100vh\" overflow=\"hidden\">\n            <DavSideBar rootDirs={this.state.rootDirs} handleNavigate={this.navigateAbsolute} currentDirectory={this.state.currentDirectory} />\n\n            <Pane display=\"grid\" gridTemplateRows=\"auto auto 1fr\" height=\"100%\" overflowY=\"scroll\">\n                <DavHeader />\n\n                <DavToolBar currentDirectory={this.state.currentDirectory}\n                    displayMode={this.state.displayMode} \n                    handleDisplayMode={this.changeDisplayMode}\n                    handleNavigate={this.navigateAbsolute} />\n\n                <DavDirectoryPane displayMode={this.state.displayMode}\n                    folders={this.state.directories}\n                    files={this.state.files}\n                    loading={this.state.loading}\n                    handleDeleteFileItem={this.deleteFileItem}\n                    handleNavigate={this.navigate}\n                    handleShowDetails={this.toggleFileDetails} />\n\n            </Pane>\n\n            <SideSheet id=\"side-details\"\n                isShown={this.state.showDetails}\n                onCloseComplete={() => this.setState({ showDetails: false })}\n            >\n                <FileDetailsPane fileItem={this.state.detailedFileItem} davClient={this.state.davClient} />\n            </SideSheet>\n        </Pane>\n    }\n}","import { Component } from 'react';\n\nimport { Button, InfoSignIcon, Link, LogInIcon } from 'evergreen-ui';\nimport { Link as ReactRouterLink } from 'react-router-dom';\n\nimport { DavConfigurationContext } from '../../AppSettings';\n\nimport './WelcomePage.css';\n\nexport default class WelcomePage extends Component {\n    static contextType = DavConfigurationContext;\n\n    showLoginDialog = () => {\n        this.context.setShowConnectionDialog(true);\n    }\n\n    render = () => {\n        return <header id=\"header\">\n\t\t\t\t<div className=\"content\">\n\t\t\t\t\t<h1><a href=\"/\">Nico's Drive</a></h1>\n\t\t\t\t\t<p>The private online storage solution.<br />\n\t\t\t\t\tBackup your memories ... <strong>automatically!</strong><br />\n                    Access your files anytime, anywhere, just like a shared drive,<br />\n                    On any computer.</p>\n\t\t\t\t\t<ul className=\"actions\">\n                        <li><Button is=\"div\" onClick={() => window.location.assign('https://github.com/hironico/nico.drive#readme')} appearance=\"default\" height={60} padding={28} iconBefore={InfoSignIcon} fontSize={22}>Learn more</Button></li>\n                        <li><Button is=\"div\" appearance=\"primary\" intent=\"success\" height={60} padding={28} iconBefore={LogInIcon} fontSize={22}>\n                            <Link is={ReactRouterLink} to=\"/login\">Login</Link>\n                            </Button></li>\n\t\t\t\t\t</ul>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"image phone\"><div className=\"inner\"><img src=\"images/screen.jpg\" alt=\"\" /></div></div>\n\t\t\t</header>\n    }\n}","\nimport { React, Component } from 'react';\n\nimport appTheme from './AppTheme';\nimport {DavConfigurationProvider} from './AppSettings';\n\nimport { ThemeProvider } from 'evergreen-ui';\nimport { BrowserRouter } from 'react-router-dom';\nimport { Routes, Route, Navigate } from 'react-router';\n\nimport LoginView from './views/LoginView';\nimport DavExplorerView from './views/DavExplorerView';\nimport WelcomePage from './components/welcome-page/WelcomePage';\n\n// theming provided by this page: https://github.com/segmentio/evergreen/issues/542\n// see also: https://evergreen.segment.com/introduction/theming\n\nclass App extends Component {\n  render = () => {\n    return <ThemeProvider value={appTheme}>      \n      <DavConfigurationProvider>\n        <BrowserRouter>\n        <Routes>\n          <Route path=\"/\" element={<WelcomePage />} />\n          <Route path=\"login\" element={<LoginView />} />\n          <Route path=\"explorer\" element={<DavExplorerView />} />\n          <Route path=\"*\" element={<Navigate to=\"/\" />} />\n        </Routes>\n        </BrowserRouter>\n        </DavConfigurationProvider>\n    </ThemeProvider>\n  }\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nimport './index.css';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}