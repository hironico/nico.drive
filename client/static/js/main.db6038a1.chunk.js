(this["webpackJsonpnico.drive.client"]=this["webpackJsonpnico.drive.client"]||[]).push([[0],{139:function(e,t,n){},140:function(e,t,n){},193:function(e,t){},195:function(e,t){},230:function(e,t,n){},299:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(30),o=n.n(i),c=(n(139),n(13)),s=n(15),l=n(14),d=n(35),u=(n.p,n(140),n(48)),p=n(2),j=(u.AuthType.Basic,new RegExp(".*","i"),r.a.createContext({connectionValid:!1})),h=function(e){Object(s.a)(n,e);var t=Object(l.a)(n);function n(){var e;return Object(c.a)(this,n),(e=t.call(this)).filterFileItems=function(t){var n=null===t||""===t?".*":t;e.setState({filter:t,filterRegExp:new RegExp(n,"i")})},e.setDavClient=function(t,n){var a="undefined"!==typeof n&&null!==n?new URL(n):null,r=a?"".concat(a.protocol,"//").concat(a.host):"",i=a?a.pathname.split("/"):"",o=a?"/".concat(i[0]):"";i=a?i.splice(0,1):[];var c=a?i.join("/"):"";e.setState({davClient:t,davBaseUrl:t?r:"",davWebContext:t?o:"",homeDirectory:t?c:"",connectionValid:!!t,showConnectionDialog:!t})},e.setConnectionValid=function(t){e.setState({connectionValid:t})},e.disconnect=function(){e.setDavClient(null,null)},e.setShowConnectionDialog=function(t){console.log("Must set showConnectionDialog to : "+t),e.setState({showConnectionDialog:t})},e.getBasePath=function(){return"".concat(e.state.davWebContext).concat(e.state.homeDirectory)},e.getClientUrl=function(){return"".concat(e.state.davBaseUrl).concat(e.state.davWebContext)},e.getThumbApiUrl=function(){return"".concat(e.state.davBaseUrl,"/thumb")},e.getExifApiUrl=function(){return"".concat(e.state.davBaseUrl,"/meta/exif")},e.getMetadataApiUrl=function(){return"".concat(e.state.davBaseUrl,"/meta/xmp")},e.isImageFile=function(t){if("undefined"===typeof t||null===t)return!1;if(t.startsWith("."))return!1;var n=t.lastIndexOf(".");if(n<0)return!1;var a=t.toUpperCase().substring(n+1);return-1!==e.state.supportedFormats.indexOf(a)},e.render=function(){return Object(p.jsx)(j.Provider,{value:e.state,children:e.props.children})},e.state={davBaseUrl:"http://localhost:8080",davWebContext:"/dav",authType:u.AuthType.Basic,username:"hironico",password:"hironico",davClient:null,connectionValid:!1,showConnectionDialog:!1,homeDirectory:"/hironico",supportedFormats:["JPEG","JPG","PNG","WEBP","AVIF","TIFF","GIF","SVG","CR2"],filter:"",filterRegExp:new RegExp(".*","i"),filterFileItems:e.filterFileItems,setDavClient:e.setDavClient,setConnectionValid:e.setConnectionValid,setShowConnectionDialog:e.setShowConnectionDialog,getClientUrl:e.getClientUrl,getThumbApiUrl:e.getThumbApiUrl,getExifApiUrl:e.getExifApiUrl,getMetadataApiUrl:e.getMetadataApiUrl,isImageFile:e.isImageFile,getBasePath:e.getBasePath,disconnect:e.disconnect},e}return n}(a.Component),f=n(86),x=n(34),b=n.n(x),g=n(44),m=n(349),O=n(330),y=n(350),v=n(356),C=n(354),w=n(300),D=n(303),I=n(346),T=n(357),S=n(321),k=n(345),F=n(40),A=n(322),L=(n(230),function(e){Object(s.a)(n,e);var t=Object(l.a)(n);function n(){var e;return Object(c.a)(this,n),(e=t.call(this)).showLoginDialog=function(){e.context.setShowConnectionDialog(!0)},e.render=function(){return Object(p.jsxs)("header",{id:"header",children:[Object(p.jsxs)("div",{className:"content",children:[Object(p.jsx)("h1",{children:Object(p.jsx)("a",{href:"#",children:"Nico's Drive"})}),Object(p.jsxs)("p",{children:["The private online storage solution.",Object(p.jsx)("br",{}),"Backup your memories ... ",Object(p.jsx)("strong",{children:"automatically!"}),Object(p.jsx)("br",{}),"Access your files anytime, anywhere, just like a shared drive,",Object(p.jsx)("br",{}),"On any computer."]}),Object(p.jsxs)("ul",{className:"actions",children:[Object(p.jsx)("li",{children:Object(p.jsx)(F.a,{is:"div",onClick:function(){return window.location.assign("https://github.com/hironico/nico.drive#readme")},appearance:"default",height:60,padding:28,iconBefore:S.a,fontSize:22,children:"Learn more"})}),Object(p.jsx)("li",{children:Object(p.jsx)(F.a,{is:"div",onClick:function(){return e.showLoginDialog()},appearance:"primary",intent:"success",height:60,padding:28,iconBefore:A.a,fontSize:22,children:"Login"})})]})]}),Object(p.jsx)("div",{className:"image phone",children:Object(p.jsx)("div",{className:"inner",children:Object(p.jsx)("img",{src:"images/screen.jpg",alt:""})})})]})},e}return n}(a.Component));L.contextType=j;var M=n(325),R=n(326),B=n(348),U=n(353),z=n(335),N=n(323),G=n(324),P=function(e){Object(s.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(c.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).render=function(){var t=[],n=e.props.rating?e.props.rating:0,a=e.props.maxRating?e.props.maxRating:5;a<n&&(a=n);for(var r=e.props.size?e.props.size:24,i=0;i<n;i++){var o=Object(p.jsx)(N.a,{color:"#FBE6A2",size:r},i);t.push(o)}for(var c=n;c<a;c++){var s=Object(p.jsx)(G.a,{color:"#C7CED4",size:r},c);t.push(s)}return Object(p.jsx)(d.a,{display:"inline-fex",alignItems:"center",children:t})},e}return n}(a.Component),E=function(e){Object(s.a)(n,e);var t=Object(l.a)(n);function n(){var e;return Object(c.a)(this,n),(e=t.call(this)).componentDidMount=function(){e.loadImageInformation(),e.loadMetaDataInformation()},e.getDownloadLink=function(){if(e.context.connectionValid)return e.context.davClient.getFileDownloadLink(e.props.fileItem.filename)},e.loadImageInformation=function(){var t=e.context.getExifApiUrl(),n={filename:e.props.fileItem.filename};fetch(t,{method:"POST",body:JSON.stringify(n),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(t){e.setState({imageData:t})})).catch((function(t){console.log("Error while reading exif data: "+t),e.setState({metadata:{tags:""}})}))},e.loadMetaDataInformation=function(){var t=e.context.getMetadataApiUrl(),n={filename:e.props.fileItem.filename,raw:!1};fetch(t,{method:"POST",body:JSON.stringify(n),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(t){e.setState({metadata:t})})).catch((function(t){console.log("Error while reading metadata: "+t),e.setState({metadata:{tags:""}})}))},e.renderFileItemSize=function(){var t="bytes",n=e.props.fileItem.size;return n>1024&&(n=(n/1024).toFixed(2),t="KB"),n>1024&&(n=(n/1024).toFixed(2),t="MB"),n>1024&&(n=(n/1024).toFixed(2),t="GB"),Object(p.jsxs)("span",{children:[n,"\xa0",t]})},e.renderImageTabs=function(){var t=e.context.isImageFile(e.props.fileItem.basename);return Object(p.jsxs)(d.a,{padding:15,children:[Object(p.jsx)(M.a,{marginBottom:16,flexBasis:240,marginRight:24,children:e.state.tabs.filter((function(e,n){return!(n>0)||t})).map((function(t,n){return Object(p.jsx)(R.a,{id:t,onSelect:function(){return e.setState({selectedIndex:n})},isSelected:n===e.state.selectedIndex,"aria-controls":"panel-".concat(t),children:t},t)}))}),e.state.tabs.map((function(t,n){var a;switch(n){case 0:a=e.renderFileDetails();break;case 1:a=e.renderImageDetails();break;case 2:a=e.renderMetadataDetails();break;default:a=Object(p.jsx)("div",{})}return Object(p.jsx)(d.a,{id:"panel-".concat(t),role:"tabpanel","aria-labelledby":t,"aria-hidden":n!==e.state.selectedIndex,display:n===e.state.selectedIndex?"block":"none",children:a},t)}))]})},e.renderFileDetails=function(){return Object(p.jsxs)(B.a,{marginTop:15,children:[Object(p.jsxs)(B.a.Head,{children:[Object(p.jsx)(B.a.TextHeaderCell,{children:Object(p.jsxs)(d.a,{display:"inline-flex",alignItems:"center",children:[Object(p.jsx)(S.a,{}),"\xa0File information"]})}),Object(p.jsx)(B.a.TextHeaderCell,{children:"\xa0"})]}),Object(p.jsxs)(B.a.Body,{children:[Object(p.jsxs)(B.a.Row,{children:[Object(p.jsx)(B.a.TextCell,{children:"Path:"}),Object(p.jsx)(B.a.TextCell,{children:e.props.fileItem.filename})]},"row_path"),Object(p.jsxs)(B.a.Row,{children:[Object(p.jsx)(B.a.TextCell,{children:"Last modif:"},"row_modif"),Object(p.jsx)(B.a.TextCell,{children:e.props.fileItem.lastmod})]}),Object(p.jsxs)(B.a.Row,{children:[Object(p.jsx)(B.a.TextCell,{children:"Size:"},"row_size"),Object(p.jsx)(B.a.TextCell,{children:e.renderFileItemSize()})]})]})]})},e.renderImageDetails=function(){if("undefined"===typeof e.state.imageData.image)return Object(p.jsx)(a.Fragment,{children:"\xa0"});var t=Object.keys(e.state.imageData.image).map((function(t,n){return Object(p.jsxs)(B.a.Row,{children:[Object(p.jsx)(B.a.TextCell,{children:t}),Object(p.jsx)(B.a.TextCell,{children:e.state.imageData.image[t]})]},n)}));return Object(p.jsxs)(B.a,{marginTop:15,children:[Object(p.jsxs)(B.a.Head,{children:[Object(p.jsx)(B.a.TextHeaderCell,{children:Object(p.jsxs)(d.a,{display:"inline-flex",alignItems:"center",children:[Object(p.jsx)(S.a,{}),"\xa0Image information"]})}),Object(p.jsx)(B.a.TextHeaderCell,{children:"\xa0"})]}),Object(p.jsx)(B.a.Body,{children:t})]})},e.renderMetadataDetails=function(){if("undefined"===typeof e.state.metadata)return Object(p.jsx)(a.Fragment,{children:"\xa0"});var t=Object.keys(e.state.metadata).map((function(t,n){return Object(p.jsxs)(B.a.Row,{children:[Object(p.jsx)(B.a.TextCell,{children:t}),Object(p.jsx)(B.a.TextCell,{children:e.state.metadata[t]})]},"meta-".concat(n))}));return Object(p.jsxs)(B.a,{marginTop:15,children:[Object(p.jsxs)(B.a.Head,{children:[Object(p.jsx)(B.a.TextHeaderCell,{children:Object(p.jsxs)(d.a,{display:"inline-flex",alignItems:"center",children:[Object(p.jsx)(S.a,{}),"\xa0Metadata information"]})}),Object(p.jsx)(B.a.TextHeaderCell,{children:"\xa0"})]}),Object(p.jsx)(B.a.Body,{children:t})]})},e.renderTags=function(){if(!e.context.isImageFile(e.props.fileItem.basename))return Object(p.jsx)("div",{children:"\xa0"});var t="Loading tags info...",n=[];return e.state.metadata&&("undefined"!==typeof e.state.metadata.tags&&""!==e.state.metadata.tags&&(n=e.state.metadata.tags.split(",")),t=0===n.length?"No tags for this image":""),Object(p.jsx)(U.a,{inputProps:{placeholder:t},values:n,flexGrow:2,margin:15,disabled:!0})},e.getRating=function(){return e.context.isImageFile(e.props.fileItem.basename)&&e.state.metadata&&e.state.metadata["xmp:Rating"]?Number.parseInt(e.state.metadata["xmp:Rating"]):0},e.render=function(){var t=Object(p.jsx)(z.a,{size:24});S.a;return Object(p.jsxs)(d.a,{zIndex:1,flexShrink:0,elevation:0,backgroundColor:"white",children:[Object(p.jsx)(d.a,{padding:16,borderBottom:"muted",children:Object(p.jsx)(D.a,{size:600,children:e.props.fileItem.basename})}),Object(p.jsxs)(d.a,{display:"inline-flex",alignItems:"center",children:[Object(p.jsx)(F.a,{appearance:"primary",intent:"success",is:"a",margin:20,iconBefore:t,href:e.getDownloadLink(),target:"_blank",disabled:!e.context.connectionValid,children:"Download"}),Object(p.jsx)(P,{rating:e.getRating(),maxRating:5,marginRight:10,marginLeft:10})]}),Object(p.jsx)(d.a,{display:"flex",gridTemplateColumns:"auto",children:e.renderTags()}),Object(p.jsx)(d.a,{children:e.renderImageTabs()})]})},e.state={imageData:[],selectedIndex:0,tabs:["Information","Image","Metadata"]},e}return n}(a.Component);E.contextType=j;var V=n(332),H=n(337),W=n(36),_=n(338),J=n(37),X=n(336),K=function(e){Object(s.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(c.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).renderFileItemSize=function(){var t="bytes",n=e.props.fileItem.size;return n>1024&&(n=(n/1024).toFixed(2),t="KB"),n>1024&&(n=(n/1024).toFixed(2),t="MB"),n>1024&&(n=(n/1024).toFixed(2),t="GB"),"".concat(n," ").concat(t)},e.renderGrid=function(){return Object(p.jsxs)(V.a,{elevation:2,backgroundColor:"white",width:200,height:240,margin:24,display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",children:[Object(p.jsx)(d.a,{style:{width:"200px",height:"200px",marginTop:"-15px",display:"flex",justifyContent:"center",alignItems:"center"},background:"tint2",children:Object(p.jsx)(W.a,{icon:X.a,size:48,color:"success"})}),Object(p.jsxs)(d.a,{display:"inline-flex",alignItems:"center",justifyContent:"space-between",style:{width:"190px",height:"18px",margin:"5px"},children:[Object(p.jsx)(H.a,{href:"#",onClick:function(t){e.props.handleShowDetails(e.props.fileItem)},children:Object(p.jsx)(W.a,{icon:S.a,color:"info"})}),Object(p.jsx)(J.a,{style:{overflow:"hidden",maxWidth:"155px",maxHeight:"24px"},children:e.props.fileItem.basename}),Object(p.jsx)(H.a,{href:e.context.davClient.getFileDownloadLink(e.props.fileItem.filename),target:"_blank",children:Object(p.jsx)(z.a,{color:"success"})})]})]})},e.renderTable=function(){return Object(p.jsxs)(B.a.Row,{isSelectable:!0,height:32,children:[Object(p.jsx)(B.a.TextCell,{flexGrow:3,textAlign:"left",children:Object(p.jsxs)(H.a,{href:e.context.davClient.getFileDownloadLink(e.props.fileItem.filename),target:"_blank",borderBottom:"none",children:[Object(p.jsx)(X.a,{}),"\xa0",e.props.fileItem.basename]})}),Object(p.jsx)(B.a.TextCell,{textAlign:"left",children:e.renderFileItemSize()}),Object(p.jsx)(B.a.TextCell,{textAlign:"left",children:e.props.fileItem.lastmod}),Object(p.jsxs)(B.a.TextCell,{flexGrow:1,textAlign:"right",children:[Object(p.jsx)(H.a,{href:"#",onClick:function(t){e.props.handleShowDetails(e.props.fileItem)},children:Object(p.jsx)(W.a,{icon:S.a,color:"info"})}),"\xa0",Object(p.jsx)(H.a,{href:e.context.davClient.getFileDownloadLink(e.props.fileItem.filename),target:"_blank",children:Object(p.jsx)(z.a,{color:"success"})})]})]},e.props.fileItem.basename)},e.render=function(){switch(e.props.displayMode){case"grid":return e.renderGrid();case"table":return e.renderTable();default:return console.log("Invalid display mode: ".concat(e.props.displayMode,". Using grid as a default.")),e.renderGrid()}},e}return n}(a.Component);K.contextType=j;var q=function(e){Object(s.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(c.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).renderGrid=function(){return Object(p.jsx)(V.a,{elevation:2,backgroundColor:"white",width:200,height:240,margin:24,display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",children:Object(p.jsxs)(H.a,{href:"#",onClick:function(t){return e.props.handleNavigate(e.props.fileItem.basename)},children:[Object(p.jsx)(d.a,{style:{width:"200px",height:"200px",marginTop:"-15px",display:"flex",justifyContent:"center",alignItems:"center"},background:"tint2",children:Object(p.jsx)(W.a,{icon:_.a,size:48,color:"#F7D154"})}),Object(p.jsxs)(d.a,{display:"inline-flex",alignItems:"center",justifyContent:"center",style:{width:"190px",height:"18px",margin:"5px"},children:[Object(p.jsx)(_.a,{color:"#F7D154"}),Object(p.jsx)(J.a,{style:{overflow:"hidden",maxWidth:"155px",maxHeight:"24px"},children:e.props.fileItem.basename})]})]})})},e.renderTable=function(){return Object(p.jsxs)(B.a.Row,{isSelectable:!0,justifyContent:"space-between",height:32,children:[Object(p.jsx)(B.a.TextCell,{flexGrow:3,textAlign:"left",children:Object(p.jsxs)(H.a,{href:"#",onClick:function(t){return e.props.handleNavigate(e.props.fileItem.basename)},borderBottom:"none",children:[Object(p.jsx)(_.a,{color:"#F7D154"}),"\xa0",e.props.fileItem.basename]})}),Object(p.jsx)(B.a.TextCell,{textAlign:"left",children:"\xa0"}),Object(p.jsx)(B.a.TextCell,{textAlign:"left",children:e.props.fileItem.lastmod}),Object(p.jsx)(B.a.TextCell,{flexGrow:1,children:"\xa0"})]},e.props.fileItem.basename)},e}return n}(K),Q=n(64),Y=function(e){Object(s.a)(n,e);var t=Object(l.a)(n);function n(){var e;return Object(c.a)(this,n),(e=t.call(this)).componentDidMount=function(){e.setState({thumb:null},(function(){return e.generateThumb()}))},e.generateThumb=function(){var t={filename:e.props.fileItem.filename},n=Object(Q.a)(e);fetch(e.context.getThumbApiUrl(),{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}}).then((function(e){return e.blob()})).then((function(e){var t=new FileReader;t.readAsDataURL(e),t.onloadend=function(){var e=t.result;n.setState((function(t){return{thumb:e}}))}})).catch((function(t){return console.log("Could not generate thumb for file ".concat(e.props.fileItem.filename,"\nReason: ").concat(t))}))},e.renderGrid=function(){var t={};null!==e.state.thumb&&(t={backgroundImage:"url("+e.state.thumb+")",backgroundPosition:"center",backgroundSize:"cover",width:"200px",height:"200px",marginTop:"-15px"});return Object(p.jsxs)(V.a,{elevation:2,backgroundColor:"white",width:200,height:240,margin:24,display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",children:[Object(p.jsx)("div",{style:t,children:"\xa0"}),Object(p.jsxs)(d.a,{display:"inline-flex",alignItems:"center",justifyContent:"space-between",style:{width:"190px",height:"18px",margin:"5px"},children:[Object(p.jsx)(H.a,{href:"#",onClick:function(t){e.props.handleShowDetails(e.props.fileItem)},children:Object(p.jsx)(W.a,{icon:S.a,color:"info"})}),Object(p.jsx)(J.a,{style:{overflow:"hidden",maxWidth:"155px",maxHeight:"24px"},children:e.props.fileItem.basename}),Object(p.jsx)(H.a,{href:e.context.davClient.getFileDownloadLink(e.props.fileItem.filename),target:"_blank",children:Object(p.jsx)(z.a,{color:"success"})})]})]})},e.renderTable=function(){var t={};null!==e.state.thumb&&(t={backgroundImage:"url("+e.state.thumb+")",backgroundPosition:"center",backgroundSize:"cover",width:"16px",height:"16px",marginRight:"5px"});return Object(p.jsxs)(B.a.Row,{isSelectable:!0,justifyContent:"space-between",height:32,children:[Object(p.jsx)(B.a.TextCell,{flexGrow:3,textAlign:"left",children:Object(p.jsx)(H.a,{href:e.context.davClient.getFileDownloadLink(e.props.fileItem.filename),target:"_blank",borderBottom:"none",children:Object(p.jsxs)("div",{style:{display:"inline-flex"},children:[Object(p.jsx)("div",{style:t,children:"\xa0"}),Object(p.jsx)("div",{children:e.props.fileItem.basename})]})})}),Object(p.jsx)(B.a.TextCell,{textAlign:"left",children:e.renderFileItemSize()}),Object(p.jsx)(B.a.TextCell,{textAlign:"left",children:e.props.fileItem.lastmod}),Object(p.jsxs)(B.a.TextCell,{flexGrow:1,textAlign:"right",children:[Object(p.jsx)(H.a,{href:"#",onClick:function(t){e.props.handleShowDetails(e.props.fileItem)},children:Object(p.jsx)(W.a,{icon:S.a,color:"info"})}),"\xa0",Object(p.jsx)(H.a,{href:e.context.davClient.getFileDownloadLink(e.props.fileItem.filename),target:"_blank",children:Object(p.jsx)(z.a,{color:"success"})})]})]},e.props.fileItem.basename)},e.state={thumb:null},e}return n}(K);Y.contextType=j;var Z=function(e){Object(s.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(c.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).navigate=function(t){e.setState({filter:"",filterRegExp:new RegExp(".*","i")},(function(){e.props.handleNavigate(t)}))},e.renderFolders=function(){return e.props.folders.filter((function(t){return-1!==t.basename.search(e.context.filterRegExp)})).map((function(t,n){return Object(p.jsx)(q,{fileItem:t,displayMode:e.props.displayMode,handleNavigate:e.navigate,handleShowDetails:e.props.handleShowDetails},"dir_"+n)}))},e.renderFiles=function(){return e.props.files.filter((function(t){return-1!==t.basename.search(e.context.filterRegExp)})).map((function(t,n){return e.context.isImageFile(t.basename)?Object(p.jsx)(Y,{fileItem:t,displayMode:e.props.displayMode,handleShowDetails:e.props.handleShowDetails},"file_"+n):Object(p.jsx)(K,{fileItem:t,displayMode:e.props.displayMode,handleShowDetails:e.props.handleShowDetails},"file_"+n)}))},e.renderDirectoryContentsGrid=function(){return Object(p.jsxs)(d.a,{display:"flex",flexWrap:"wrap",justifyContent:"space-evenly",background:"overlay",children:[e.renderFolders(),e.renderFiles()]})},e.renderDirectoryContentsTable=function(){return Object(p.jsxs)(B.a,{children:[Object(p.jsxs)(B.a.Head,{height:32,children:[Object(p.jsx)(B.a.TextHeaderCell,{textAlign:"left",flexGrow:3,children:"Name"}),Object(p.jsx)(B.a.TextHeaderCell,{textAlign:"left",children:"Size"}),Object(p.jsx)(B.a.TextHeaderCell,{textAlign:"left",children:"Modified"}),Object(p.jsx)(B.a.TextHeaderCell,{textAlign:"right",children:"Actions"})]}),Object(p.jsxs)(B.a.Body,{children:[e.renderFolders(),e.renderFiles()]})]})},e.render=function(){var t;switch(e.props.displayMode){case"grid":t=e.renderDirectoryContentsGrid();break;case"table":t=e.renderDirectoryContentsTable();break;default:console.log("Invalid display mode ".concat(e.props.displayMode,". Using grid as a default.")),t=e.renderDirectoryContentsGrid()}return t},e}return n}(a.Component);Z.contextType=j;var $=n(341),ee=n(342),te=n(339),ne=n(340),ae=function(e){Object(s.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(c.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).render=function(){var t=e.props.currentDirectory,n=Object(p.jsx)(te.a,{size:18,style:{marginLeft:"5px",marginRight:"5px"}}),a=Object(p.jsx)(ne.a,{size:18,style:{marginLeft:"5px",marginRight:"5px"}}),r="/"===t?[""]:t.split("/"),i=[],o=r.map((function(t,r){var o=0===r?a:n;i.push(t);var c=i.join("/");return Object(p.jsxs)(H.a,{href:"#",style:{display:"flex",alignItems:"center"},onClick:function(){e.props.handleNavigate(""===t?"/":c)},children:[o,t]},r+1)}));return Object(p.jsx)(d.a,{display:"flex",padding:8,background:"blueTint",children:o})},e}return n}(a.Component),re=function(e){Object(s.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(c.a)(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).renderDisplayTools=function(){return Object(p.jsxs)(a.Fragment,{children:[Object(p.jsx)(H.a,{href:"#",style:{display:"flex",alignItems:"center"},onClick:function(t){return e.props.handleDisplayMode("grid")},children:Object(p.jsx)($.a,{size:18,style:{marginLeft:"5px",marginRight:"5px"}})}),"\xa0",Object(p.jsx)(H.a,{href:"#",style:{display:"flex",alignItems:"center"},onClick:function(t){return e.props.handleDisplayMode("table")},children:Object(p.jsx)(ee.a,{size:18,style:{marginLeft:"5px",marginRight:"5px"}})})]})},e.render=function(){return Object(p.jsxs)(d.a,{zIndex:1,flexShrink:0,elevation:0,background:"tint2",display:"grid",gridTemplateColumns:"auto 1fr",children:[Object(p.jsx)(ae,{handleNavigate:e.props.handleNavigate,currentDirectory:e.props.currentDirectory}),Object(p.jsx)(d.a,{justifySelf:"end",display:"inline-flex",alignItems:"center",children:e.renderDisplayTools()})]})},e}return n}(a.Component);re.contextType=j;var ie=function(e){var t=e.children;return Object(p.jsx)("div",{style:{paddingTop:"10px"},children:t})},oe=n(343),ce=n(344),se={folderLabel:{display:"grid",justifyItems:"start",gridTemplateColumns:"auto auto 1fr",span:{marginLeft:"5px"}},collapsibleOpen:{height:"auto",overflow:"hidden",paddingLeft:"20px"},collapsibleClosed:{height:"0px",overflow:"hidden",paddingLeft:"20px"}},le=function(e){Object(s.a)(n,e);var t=Object(l.a)(n);function n(){var e;return Object(c.a)(this,n),(e=t.call(this)).getDirectoryContents=Object(g.a)(b.a.mark((function t(){var n,a;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=[],!e.context.connectionValid){t.next=7;break}return t.next=4,e.context.davClient.getDirectoryContents(e.props.absolutePath);case 4:a=t.sent,n=a.filter((function(e){return"directory"===e.type})),e.setState({subDirs:n});case 7:case"end":return t.stop()}}),t)}))),e.handleToggle=function(t){e.setState({isOpen:!e.state.isOpen},(function(){e.state.isOpen&&0===e.state.subDirs.length&&e.getDirectoryContents()}))},e.handleClick=function(t){0===e.state.subDirs.length&&(e.getDirectoryContents(),e.setState({isOpen:!0})),e.props.handleNavigate(e.props.absolutePath)},e.renderSubDirectories=function(){return e.state.subDirs.map((function(t,a){return Object(p.jsx)(n,{basename:t.basename,absolutePath:"".concat(e.props.absolutePath,"/").concat(t.basename),handleNavigate:e.props.handleNavigate},"".concat(e.props.key,"-").concat(a))}))},e.render=function(){var t=e.state.isOpen?oe.a:te.a,n=e.state.isOpen?_.a:ce.a;return Object(p.jsxs)("div",{children:[Object(p.jsxs)("div",{style:se.folderLabel,children:[Object(p.jsx)(W.a,{onClick:e.handleToggle,icon:t,size:16,marginRight:"10",cursor:"pointer"}),Object(p.jsxs)("div",{style:se.folderLabel,onClick:e.handleClick,children:[Object(p.jsx)(W.a,{icon:n,size:16,color:"#F7D154",cursor:"pointer"}),Object(p.jsx)(J.a,{style:se.folderLabel.span,cursor:"pointer",children:e.props.basename})]})]}),Object(p.jsx)("div",{style:e.state.isOpen?se.collapsibleOpen:se.collapsibleClosed,children:e.renderSubDirectories()})]})},e.state={isOpen:!1,subDirs:[]},e}return n}(a.Component);le.contextType=j;var de=le,ue=function(e){Object(s.a)(n,e);var t=Object(l.a)(n);function n(){var e;return Object(c.a)(this,n),(e=t.call(this)).componentDidUpdate=function(){e.context.connectionValid&&null!==e.context.davClient&&null===e.state.currentDirectory&&e.setState({currentDirectory:"/"},(function(){e.getDirectoryContents()}))},e.getDirectoryContents=Object(g.a)(b.a.mark((function t(){var n,a,r;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=[],a=[],!e.context.connectionValid){t.next=9;break}return t.next=5,e.context.davClient.getDirectoryContents(e.state.currentDirectory);case 5:r=t.sent,n=r.filter((function(e){return"directory"===e.type})),a=r.filter((function(e){return"file"===e.type})),"/"===e.state.currentDirectory&&e.setState({rootDirs:n});case 9:e.setState({directories:n,files:a},(function(){console.log("".concat(n.length," directories and ").concat(a.length," files from ").concat(e.state.currentDirectory))}));case 10:case"end":return t.stop()}}),t)}))),e.navigate=function(t){var n=e.state.currentDirectory.endsWith("/")||t.startsWith("/")?"":"/",a=e.state.currentDirectory+n+t;e.setState((function(e){return{currentDirectory:a,files:[],directories:[]}}),(function(){console.log("Navigated to ".concat(a,", now get directory contents...")),e.getDirectoryContents()}))},e.navigateAbsolute=function(t){e.setState((function(e){return{currentDirectory:t,files:[],directories:[]}}),(function(){console.log("Absolute navigated to ".concat(t,", now get directory contents...")),e.getDirectoryContents()}))},e.toggleFileDetails=function(t){var n=t;n.filename.startsWith(e.context.homeDirectory)&&(n.filename=n.filename.substring(e.context.homeDirectory.length)),e.setState({showDetails:!0,detailedFileItem:n})},e.disconnect=function(){e.context.disconnect()},e.changeDisplayMode=function(t){e.setState({displayMode:t})},e.renderAvatarMenu=function(){return Object(p.jsx)(m.a,{justifySelf:"end",position:O.a.BOTTOM_RIGHT,content:Object(p.jsxs)(y.a,{children:[Object(p.jsxs)(y.a.Group,{children:[Object(p.jsx)(y.a.Item,{icon:S.a,intent:"success",children:Object(p.jsx)(v.a,{color:"green",children:e.context.username})}),Object(p.jsx)(y.a.Item,{children:e.context.getClientUrl()})]}),Object(p.jsx)(y.a.Divider,{}),Object(p.jsx)(y.a.Group,{children:Object(p.jsx)(y.a.Item,{icon:k.a,intent:"danger",onClick:function(){e.disconnect()},children:"Disconnect"})})]}),children:Object(p.jsx)(C.a,{name:e.context.username,size:32,marginLeft:15,marginRight:15,style:{cursor:"pointer"},justifySelf:"end"})})},e.render=function(){return e.context.connectionValid?e.state.currentDirectory?Object(p.jsxs)(d.a,{display:"grid",gridTemplateColumns:"1fr 4fr",height:"100%",children:[Object(p.jsxs)(d.a,{background:"blueTint",elevation:0,padding:15,display:"grid",gridTemplateRows:"auto auto 1fr",gridTemplateColumns:"auto",overflowX:"scroll",children:[Object(p.jsx)(d.a,{background:"blueTint",children:Object(p.jsx)(D.a,{size:900,color:"neutral",children:"My files"})}),Object(p.jsx)(d.a,{background:"blueTint",elevation:0,marginTop:15,children:Object(p.jsx)(D.a,{size:600,color:"neutral",children:"File manager"})}),Object(p.jsx)(ie,{children:e.state.rootDirs.map((function(t,n){return Object(p.jsx)(de,{absolutePath:"/".concat(t.basename),basename:t.basename,handleNavigate:e.navigateAbsolute},"treefolder-".concat(n))}))})]}),Object(p.jsxs)(d.a,{display:"grid",gridTemplateRows:"auto auto 1fr",children:[Object(p.jsxs)(d.a,{background:"tint2",display:"grid",gridTemplateColumns:"1fr auto",paddingTop:15,paddingBottom:15,paddingLeft:15,justifySelf:"stretch",children:[Object(p.jsx)(I.a,{placeholder:"Search in your files...",justifySelf:"stretch",onChange:function(t){return e.context.filterFileItems(t.target.value)},value:e.context.filter}),e.renderAvatarMenu()]}),Object(p.jsx)(re,{currentDirectory:e.state.currentDirectory,handleDisplayMode:e.changeDisplayMode,handleNavigate:e.navigateAbsolute}),Object(p.jsx)(Z,{displayMode:e.state.displayMode,folders:e.state.directories,files:e.state.files,handleNavigate:e.navigate,handleShowDetails:e.toggleFileDetails})]}),Object(p.jsx)(T.a,{id:"side-details",isShown:e.state.showDetails,onCloseComplete:function(){return e.setState({showDetails:!1})},children:Object(p.jsx)(E,{fileItem:e.state.detailedFileItem,davClient:e.state.davClient})})]}):Object(p.jsxs)(d.a,(t={gridTemplateColumns:"auto"},Object(f.a)(t,"gridTemplateColumns","auto"),Object(f.a)(t,"children",[Object(p.jsx)(w.a,{marginX:"auto",marginTop:120}),Object(p.jsx)(D.a,{size:600,marginX:"auto",marginTop:15,children:"Nico's Drive is loading..."})]),t)):Object(p.jsx)(L,{});var t},e.state={currentDirectory:null,directories:[],files:[],rootDirs:[],showDetails:!1,displayMode:"table"},e}return n}(a.Component);ue.contextType=j;var pe=n(347),je=n(351),he=n(304),fe=function(e){Object(s.a)(n,e);var t=Object(l.a)(n);function n(){var e;return Object(c.a)(this,n),(e=t.call(this)).componentDidUpdate=function(){""===e.state.url&&e.buildUrl()},e.buildUrl=function(){var t="localhost"===window.location.hostname?"http":"https",n="localhost"===window.location.hostname?"8080":window.location.port,a="".concat(t,"://").concat(window.location.hostname,":").concat(n,"/").concat(e.state.davContext,"/").concat(e.state.username,"/");e.setState({url:a})},e.testConnection=Object(g.a)(b.a.mark((function t(){var n,a;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n={authType:u.AuthType.Basic,username:e.state.username,password:e.state.password},a=Object(u.createClient)(e.state.url,n),t.next=5,a.getDirectoryContents("./");case 5:t.sent,e.context.setDavClient(a,e.state.url),e.setState({url:"",username:"",password:"",errorMessage:""}),t.next=16;break;case 10:t.prev=10,t.t0=t.catch(0),console.error("Could not connect to webdav: "+JSON.stringify(t.t0)),e.context.setDavClient(null),e.context.setConnectionValid(!1),e.setState({errorMessage:"Something went wrong while connecting. Check your credentiuals and try again."});case 16:return t.prev=16,e.setState({isLoading:!1}),t.finish(16);case 19:case"end":return t.stop()}}),t,null,[[0,10,16,19]])}))),e.componentDidMount=function(){e.setState({username:e.context.username,password:e.context.password,url:e.context.getClientUrl()+e.context.homeDirectory,errorMessage:""})},e.onConfirm=function(){e.setState({isLoading:!0},(function(){return e.testConnection()}))},e.onCloseComplete=function(){e.context.setShowConnectionDialog(!1),e.setState({isLoading:!1,errorMessage:""})},e.onTxtLoginChange=function(t){e.setState({username:t.target.value},(function(){e.buildUrl()}))},e.renderDialog=function(){return Object(p.jsx)(pe.a,{isShown:e.context.showConnectionDialog,title:"WebDAV Connection setup...",onCloseComplete:function(){return e.onCloseComplete()},isConfirmLoading:e.state.isLoading,onConfirm:function(t){return e.onConfirm(t)},hasFooter:!1,children:Object(p.jsxs)(d.a,{display:"grid",gridTemplateColumns:"auto",children:[Object(p.jsx)(je.a,{id:"txt-login",value:e.state.username,onChange:e.onTxtLoginChange,placeholder:"Login name...",label:"Login:"}),Object(p.jsx)(je.a,{id:"txt-password",type:"password",value:e.state.password,onChange:function(t){return e.setState({password:t.target.value})},placeholder:"Password...",label:"Password:"}),Object(p.jsx)(je.a,{id:"txt-url",value:e.state.url,onChange:function(t){return e.setState({url:t.target.value})},placeholder:"WebDAV URL...",label:"WebDAV base URL:"}),Object(p.jsxs)(d.a,{children:[Object(p.jsx)(he.a,{children:e.state.errorMessage}),Object(p.jsx)(F.a,{is:"div",marginTop:16,onClick:function(){return e.onConfirm()},disabled:e.state.isLoading,appearance:"primary",intent:"success",children:e.state.isLoading?"Please wait...":"Connect"})]})]})})},e.render=function(){return e.renderDialog()},e.state={isLoading:!1,username:"",password:"",url:"",errorMessage:"",davContext:"dav"},e}return n}(a.Component);fe.contextType=j;var xe=function(e){Object(s.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(c.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).render=function(){return Object(p.jsx)("div",{className:"App",height:"100%",children:Object(p.jsx)(d.a,{clearfix:!0,width:"100%",height:"100%",children:Object(p.jsxs)(h,{children:[Object(p.jsx)(fe,{}),Object(p.jsx)(ue,{})]})})})},e}return n}(a.Component),be=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,358)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,i=t.getLCP,o=t.getTTFB;n(e),a(e),r(e),i(e),o(e)}))};o.a.render(Object(p.jsx)(r.a.StrictMode,{children:Object(p.jsx)(xe,{})}),document.getElementById("root")),be()}},[[299,1,2]]]);
//# sourceMappingURL=main.db6038a1.chunk.js.map