(this["webpackJsonpnico.drive.client"]=this["webpackJsonpnico.drive.client"]||[]).push([[0],{144:function(e,t,n){},145:function(e,t,n){},207:function(e,t){},209:function(e,t){},234:function(e,t,n){},302:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),r=n(31),o=n.n(r),c=(n(144),n(13)),s=n(11),l=n(14),d=n(16),u=n(37),j=(n(145),n(51)),h=n(2),p={davBaseUrl:"http://localhost:8080",davWebContext:"/dav",authType:j.AuthType.Basic,username:"hironico",password:"changeme",davClient:null,connectionValid:!1,showConnectionDialog:!1,homeDirectory:"/hironico",currentDirectory:"/",supportedFormats:["JPEG","JPG","PNG","WEBP","AVIF","TIFF","TIF","GIF","SVG","CR2","DNG"],filter:"",filterRegExp:new RegExp(".*","i"),filterFileItems:function(e){},setDavClient:function(e){},setConnectionValid:function(){},setShowConnectionDialog:function(e){},getClientUrl:function(){},getThumbApiUrl:function(){},getExifApiUrl:function(){},getMetadataApiUrl:function(){},isImageFile:function(){},setCurrentDirectory:function(){},disconnect:function(){}},f=i.a.createContext(p),x=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){var e;return Object(s.a)(this,n),(e=t.call(this)).filterFileItems=function(t){var n=null===t||""===t?".*":t;e.setState({filter:t,filterRegExp:new RegExp(n,"i")})},e.setDavClient=function(t,n){var a="undefined"!==typeof n&&null!==n?new URL(n):null,i=a?"".concat(a.protocol,"//").concat(a.host):"",r=a?a.pathname.split("/"):"",o=a?"/".concat(r[0]):"";r=a?r.splice(0,1):[];var c=a?r.join("/"):"";e.setState({davClient:t,davBaseUrl:t?i:"",davWebContext:t?o:"",homeDirectory:t?c:"",connectionValid:!!t,showConnectionDialog:!t})},e.setConnectionValid=function(t){e.setState({connectionValid:t})},e.disconnect=function(){e.setDavClient(null,null)},e.setShowConnectionDialog=function(t){console.log("Must set showConnectionDialog to : "+t),e.setState({showConnectionDialog:t})},e.getBasePath=function(){return"".concat(e.state.davWebContext).concat(e.state.homeDirectory)},e.getClientUrl=function(){return"".concat(e.state.davBaseUrl).concat(e.state.davWebContext)},e.getThumbApiUrl=function(){return"".concat(e.state.davBaseUrl,"/thumb")},e.getExifApiUrl=function(){return"".concat(e.state.davBaseUrl,"/meta/exif")},e.getMetadataApiUrl=function(){return"".concat(e.state.davBaseUrl,"/meta/xmp")},e.isImageFile=function(t){if("undefined"===typeof t||null===t)return!1;if(t.startsWith("."))return!1;var n=t.lastIndexOf(".");if(n<0)return!1;var a=t.toUpperCase().substring(n+1);return-1!==e.state.supportedFormats.indexOf(a)},e.render=function(){return Object(h.jsx)(f.Provider,{value:e.state,children:e.props.children})},e.state={davBaseUrl:"http://localhost:8080",davWebContext:"/dav",authType:j.AuthType.Basic,username:"hironico",password:"hironico",davClient:null,connectionValid:!1,showConnectionDialog:!1,homeDirectory:"/hironico",supportedFormats:["JPEG","JPG","PNG","WEBP","AVIF","TIFF","GIF","SVG","CR2","DNG"],filter:"",filterRegExp:new RegExp(".*","i"),filterFileItems:e.filterFileItems,setDavClient:e.setDavClient,setConnectionValid:e.setConnectionValid,setShowConnectionDialog:e.setShowConnectionDialog,getClientUrl:e.getClientUrl,getThumbApiUrl:e.getThumbApiUrl,getExifApiUrl:e.getExifApiUrl,getMetadataApiUrl:e.getMetadataApiUrl,isImageFile:e.isImageFile,getBasePath:e.getBasePath,disconnect:e.disconnect},e}return Object(c.a)(n)}(a.Component),b=n(49),g=n(36),m=n.n(g),O=n(352),y=n(333),v=n(353),C=n(359),D=n(357),w=n(303),T=n(306),I=n(349),S=n(360),F=n(324),k=n(348),A=n(43),L=n(325),M=(n(234),function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))).showLoginDialog=function(){e.context.setShowConnectionDialog(!0)},e.render=function(){return Object(h.jsxs)("header",{id:"header",children:[Object(h.jsxs)("div",{className:"content",children:[Object(h.jsx)("h1",{children:Object(h.jsx)("a",{href:"/",children:"Nico's Drive"})}),Object(h.jsxs)("p",{children:["The private online storage solution.",Object(h.jsx)("br",{}),"Backup your memories ... ",Object(h.jsx)("strong",{children:"automatically!"}),Object(h.jsx)("br",{}),"Access your files anytime, anywhere, just like a shared drive,",Object(h.jsx)("br",{}),"On any computer."]}),Object(h.jsxs)("ul",{className:"actions",children:[Object(h.jsx)("li",{children:Object(h.jsx)(A.a,{is:"div",onClick:function(){return window.location.assign("https://github.com/hironico/nico.drive#readme")},appearance:"default",height:60,padding:28,iconBefore:F.a,fontSize:22,children:"Learn more"})}),Object(h.jsx)("li",{children:Object(h.jsx)(A.a,{is:"div",onClick:function(){return e.showLoginDialog()},appearance:"primary",intent:"success",height:60,padding:28,iconBefore:L.a,fontSize:22,children:"Login"})})]})]}),Object(h.jsx)("div",{className:"image phone",children:Object(h.jsx)("div",{className:"inner",children:Object(h.jsx)("img",{src:"images/screen.jpg",alt:""})})})]})},e}return Object(c.a)(n)}(a.Component));M.contextType=f;var B=n(328),R=n(329),U=n(351),z=n(356),N=n(338),P=n(326),H=n(327),W=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))).render=function(){var t=[],n=e.props.rating?e.props.rating:0,a=e.props.maxRating?e.props.maxRating:5;a<n&&(a=n);for(var i=e.props.size?e.props.size:24,r=0;r<n;r++){var o=Object(h.jsx)(P.a,{color:"#FBE6A2",size:i},r);t.push(o)}for(var c=n;c<a;c++){var s=Object(h.jsx)(H.a,{color:"#C7CED4",size:i},c);t.push(s)}return Object(h.jsx)(u.a,{display:"inline-fex",alignItems:"center",children:t})},e}return Object(c.a)(n)}(a.Component),E=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){var e;return Object(s.a)(this,n),(e=t.call(this)).componentDidMount=function(){e.loadImageInformation(),e.loadMetaDataInformation()},e.getDownloadLink=function(){if(e.context.connectionValid)return e.context.davClient.getFileDownloadLink(e.props.fileItem.filename)},e.loadImageInformation=function(){var t=e.context.getExifApiUrl(),n={filename:e.props.fileItem.filename};fetch(t,{method:"POST",body:JSON.stringify(n),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(t){e.setState({imageData:t})})).catch((function(t){console.log("Error while reading exif data: "+t),e.setState({metadata:{tags:""}})}))},e.loadMetaDataInformation=function(){var t=e.context.getMetadataApiUrl(),n={filename:e.props.fileItem.filename,raw:!1};fetch(t,{method:"POST",body:JSON.stringify(n),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(t){e.setState({metadata:t})})).catch((function(t){console.log("Error while reading metadata: "+t),e.setState({metadata:{tags:""}})}))},e.renderFileItemSize=function(){var t="bytes",n=e.props.fileItem.size;return n>1024&&(n=(n/1024).toFixed(2),t="KB"),n>1024&&(n=(n/1024).toFixed(2),t="MB"),n>1024&&(n=(n/1024).toFixed(2),t="GB"),Object(h.jsxs)("span",{children:[n,"\xa0",t]})},e.renderImageTabs=function(){var t=e.context.isImageFile(e.props.fileItem.basename);return Object(h.jsxs)(u.a,{padding:15,children:[Object(h.jsx)(B.a,{marginBottom:16,flexBasis:240,marginRight:24,children:e.state.tabs.filter((function(e,n){return!(n>0)||t})).map((function(t,n){return Object(h.jsx)(R.a,{id:t,onSelect:function(){return e.setState({selectedIndex:n})},isSelected:n===e.state.selectedIndex,"aria-controls":"panel-".concat(t),children:t},t)}))}),e.state.tabs.map((function(t,n){var a;switch(n){case 0:a=e.renderFileDetails();break;case 1:a=e.renderImageDetails();break;case 2:a=e.renderMetadataDetails();break;default:a=Object(h.jsx)("div",{})}return Object(h.jsx)(u.a,{id:"panel-".concat(t),role:"tabpanel","aria-labelledby":t,"aria-hidden":n!==e.state.selectedIndex,display:n===e.state.selectedIndex?"block":"none",children:a},t)}))]})},e.renderFileDetails=function(){return Object(h.jsxs)(U.a,{marginTop:15,children:[Object(h.jsxs)(U.a.Head,{height:32,children:[Object(h.jsx)(U.a.TextHeaderCell,{children:Object(h.jsxs)(u.a,{display:"inline-flex",alignItems:"center",children:[Object(h.jsx)(F.a,{}),"\xa0File information"]})}),Object(h.jsx)(U.a.TextHeaderCell,{children:"\xa0"})]}),Object(h.jsxs)(U.a.Body,{children:[Object(h.jsxs)(U.a.Row,{height:32,children:[Object(h.jsx)(U.a.TextCell,{children:"Path:"}),Object(h.jsx)(U.a.TextCell,{children:e.props.fileItem.filename})]},"row_path"),Object(h.jsxs)(U.a.Row,{height:32,children:[Object(h.jsx)(U.a.TextCell,{children:"Last modif:"},"row_modif"),Object(h.jsx)(U.a.TextCell,{children:e.props.fileItem.lastmod})]}),Object(h.jsxs)(U.a.Row,{height:32,children:[Object(h.jsx)(U.a.TextCell,{children:"Size:"},"row_size"),Object(h.jsx)(U.a.TextCell,{children:e.renderFileItemSize()})]})]})]})},e.renderImageDetails=function(){if("undefined"===typeof e.state.imageData.image)return Object(h.jsx)(a.Fragment,{children:"\xa0"});var t=Object.keys(e.state.imageData.image).map((function(t,n){return Object(h.jsxs)(U.a.Row,{children:[Object(h.jsx)(U.a.TextCell,{children:t}),Object(h.jsx)(U.a.TextCell,{children:e.state.imageData.image[t]})]},n)}));return Object(h.jsxs)(U.a,{marginTop:15,children:[Object(h.jsxs)(U.a.Head,{children:[Object(h.jsx)(U.a.TextHeaderCell,{children:Object(h.jsxs)(u.a,{display:"inline-flex",alignItems:"center",children:[Object(h.jsx)(F.a,{}),"\xa0Image information"]})}),Object(h.jsx)(U.a.TextHeaderCell,{children:"\xa0"})]}),Object(h.jsx)(U.a.Body,{children:t})]})},e.renderMetadataDetails=function(){if("undefined"===typeof e.state.metadata)return Object(h.jsx)(a.Fragment,{children:"\xa0"});var t=Object.keys(e.state.metadata).map((function(t,n){return Object(h.jsxs)(U.a.Row,{children:[Object(h.jsx)(U.a.TextCell,{children:t}),Object(h.jsx)(U.a.TextCell,{children:e.state.metadata[t]})]},"meta-".concat(n))}));return Object(h.jsxs)(U.a,{marginTop:15,children:[Object(h.jsxs)(U.a.Head,{children:[Object(h.jsx)(U.a.TextHeaderCell,{children:Object(h.jsxs)(u.a,{display:"inline-flex",alignItems:"center",children:[Object(h.jsx)(F.a,{}),"\xa0Metadata information"]})}),Object(h.jsx)(U.a.TextHeaderCell,{children:"\xa0"})]}),Object(h.jsx)(U.a.Body,{children:t})]})},e.renderTags=function(){if(!e.context.isImageFile(e.props.fileItem.basename))return Object(h.jsx)("div",{children:"\xa0"});var t="Loading tags info...",n=[];return e.state.metadata&&("undefined"!==typeof e.state.metadata.tags&&""!==e.state.metadata.tags&&(n=e.state.metadata.tags.split(",")),t=0===n.length?"No tags for this image":""),Object(h.jsx)(z.a,{inputProps:{placeholder:t},values:n,flexGrow:2,margin:15,disabled:!0})},e.getRating=function(){return e.context.isImageFile(e.props.fileItem.basename)&&e.state.metadata&&e.state.metadata["xmp:Rating"]?Number.parseInt(e.state.metadata["xmp:Rating"]):0},e.render=function(){var t=Object(h.jsx)(N.a,{size:24,marginRight:5});return Object(h.jsxs)(u.a,{zIndex:1,flexShrink:0,elevation:0,backgroundColor:"white",children:[Object(h.jsx)(u.a,{padding:16,borderBottom:"muted",children:Object(h.jsx)(T.a,{size:600,children:e.props.fileItem.basename})}),Object(h.jsxs)(u.a,{display:"inline-flex",alignItems:"center",children:[Object(h.jsx)(A.a,{appearance:"primary",intent:"success",is:"a",margin:20,iconBefore:t,href:e.getDownloadLink(),target:"_blank",disabled:!e.context.connectionValid,children:"Download"}),Object(h.jsx)(W,{rating:e.getRating(),maxRating:5,marginRight:10,marginLeft:10})]}),Object(h.jsx)(u.a,{display:"flex",gridTemplateColumns:"auto",children:e.renderTags()}),Object(h.jsx)(u.a,{children:e.renderImageTabs()})]})},e.state={imageData:[],selectedIndex:0,tabs:["Information","Image","Metadata"]},e}return Object(c.a)(n)}(a.Component);E.contextType=f;var G=n(335),V=n(340),_=n(38),J=n(341),X=n(39),K=n(339),q=n(88),Q=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i)))._capitalize=function(e){var t=e.toLowerCase();return t.charAt(0).toUpperCase()+t.slice(1)},e.renderMimeType=function(t){return"undefined"===typeof t?"File":t.endsWith("json")?"JSON":t.endsWith("xml")?"XML":t.startsWith("application/")?"File":t.startsWith("image/")?e._capitalize(t.substring(6)):t.startsWith("text/")?e._capitalize(t.substring(5))+" Text":t},e.renderHttpDate=function(e){return q.DateTime.fromHTTP(e).toLocaleString(q.DateTime.DATETIME_SHORT_WITH_SECONDS)},e.renderFileItemSize=function(){var t="bytes",n=e.props.fileItem.size;return n>1024&&(n=(n/1024).toFixed(2),t="KB"),n>1024&&(n=(n/1024).toFixed(2),t="MB"),n>1024&&(n=(n/1024).toFixed(2),t="GB"),"".concat(n," ").concat(t)},e.renderGrid=function(){return Object(h.jsxs)(G.a,{elevation:2,backgroundColor:"white",width:200,height:240,margin:24,display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",children:[Object(h.jsx)(u.a,{style:{width:"200px",height:"200px",marginTop:"-15px",display:"flex",justifyContent:"center",alignItems:"center"},background:"tint2",children:Object(h.jsx)(_.a,{icon:K.a,size:48,color:"success"})}),Object(h.jsxs)(u.a,{display:"inline-flex",alignItems:"center",justifyContent:"space-between",style:{width:"190px",height:"18px",margin:"5px"},children:[Object(h.jsx)(V.a,{href:"#",onClick:function(t){e.props.handleShowDetails(e.props.fileItem)},borderBottom:"none",children:Object(h.jsx)(_.a,{icon:F.a,color:"info"})}),Object(h.jsx)(X.a,{style:{overflow:"hidden",maxWidth:"155px",maxHeight:"24px"},children:e.props.fileItem.basename}),Object(h.jsx)(V.a,{href:e.context.davClient.getFileDownloadLink(e.props.fileItem.filename),target:"_blank",borderBottom:"none",children:Object(h.jsx)(N.a,{color:"success"})})]})]})},e.renderTable=function(){return Object(h.jsxs)(U.a.Row,{isSelectable:!0,height:32,children:[Object(h.jsx)(U.a.TextCell,{textAlign:"center",maxWidth:48,children:Object(h.jsx)(K.a,{size:16})}),Object(h.jsx)(U.a.TextCell,{textAlign:"left",children:Object(h.jsx)(V.a,{href:e.context.davClient.getFileDownloadLink(e.props.fileItem.filename),target:"_blank",borderBottom:"none",children:e.props.fileItem.basename})}),Object(h.jsx)(U.a.TextCell,{textAlign:"left",children:e.renderMimeType(e.props.fileItem.mime)}),Object(h.jsx)(U.a.TextCell,{textAlign:"left",children:e.renderFileItemSize()}),Object(h.jsx)(U.a.TextCell,{textAlign:"left",children:e.renderHttpDate(e.props.fileItem.lastmod)}),Object(h.jsxs)(U.a.TextCell,{textAlign:"center",children:[Object(h.jsx)(V.a,{href:"#",onClick:function(t){e.props.handleShowDetails(e.props.fileItem)},borderBottom:"none",marginRight:5,children:Object(h.jsx)(_.a,{icon:F.a,color:"info"})}),"\xa0",Object(h.jsx)(V.a,{href:e.context.davClient.getFileDownloadLink(e.props.fileItem.filename),target:"_blank",borderBottom:"none",children:Object(h.jsx)(N.a,{color:"success"})})]})]},e.props.fileItem.basename)},e.render=function(){switch(e.props.displayMode){case"grid":return e.renderGrid();case"table":return e.renderTable();default:return console.log("Invalid display mode: ".concat(e.props.displayMode,". Using grid as a default.")),e.renderGrid()}},e}return Object(c.a)(n)}(a.Component);Q.contextType=f;var Y=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))).renderGrid=function(){return Object(h.jsx)(G.a,{elevation:2,backgroundColor:"white",width:200,height:240,margin:24,display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",children:Object(h.jsxs)(V.a,{href:"#",onClick:function(t){return e.props.handleNavigate(e.props.fileItem.basename)},borderBottom:"none",children:[Object(h.jsx)(u.a,{style:{width:"200px",height:"200px",marginTop:"-15px",display:"flex",justifyContent:"center",alignItems:"center"},background:"tint2",children:Object(h.jsx)(_.a,{icon:J.a,size:48,color:"#F7D154"})}),Object(h.jsxs)(u.a,{display:"inline-flex",alignItems:"center",justifyContent:"center",width:190,height:18,margin:5,children:[Object(h.jsx)(J.a,{color:"#F7D154"}),Object(h.jsx)(X.a,{overflow:"hidden",maxWidth:155,maxHeight:24,children:e.props.fileItem.basename})]})]})})},e.renderTable=function(){return Object(h.jsxs)(U.a.Row,{isSelectable:!0,justifyContent:"space-between",height:32,children:[Object(h.jsx)(U.a.TextCell,{textAlign:"center",maxWidth:48,children:Object(h.jsx)(J.a,{color:"#F7D154",size:16})}),Object(h.jsx)(U.a.TextCell,{textAlign:"left",children:Object(h.jsx)(V.a,{href:"#",onClick:function(t){return e.props.handleNavigate(e.props.fileItem.basename)},borderBottom:"none",children:e.props.fileItem.basename})}),Object(h.jsx)(U.a.TextCell,{textAlign:"left",children:"Folder"}),Object(h.jsx)(U.a.TextCell,{textAlign:"left",children:"\xa0"}),Object(h.jsx)(U.a.TextCell,{textAlign:"left",children:e.renderHttpDate(e.props.fileItem.lastmod)}),Object(h.jsx)(U.a.TextCell,{textAlign:"center",children:"\xa0"})]},e.props.fileItem.basename)},e}return Object(c.a)(n)}(Q),Z=n(69),$=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){var e;return Object(s.a)(this,n),(e=t.call(this)).componentDidMount=function(){e.setState({thumb:null},(function(){return e.generateThumb()}))},e.generateThumb=function(){var t={filename:e.props.fileItem.filename},n=Object(Z.a)(e);fetch(e.context.getThumbApiUrl(),{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}}).then((function(e){return e.blob()})).then((function(e){var t=new FileReader;t.readAsDataURL(e),t.onloadend=function(){var e=t.result;n.setState((function(t){return{thumb:e}}))}})).catch((function(t){return console.log("Could not generate thumb for file ".concat(e.props.fileItem.filename,"\nReason: ").concat(t))}))},e.renderGrid=function(){var t={};null!==e.state.thumb&&(t={backgroundImage:"url("+e.state.thumb+")",backgroundPosition:"center",backgroundSize:"cover",width:"200px",height:"200px",marginTop:"-15px"});return Object(h.jsxs)(G.a,{elevation:2,backgroundColor:"white",width:200,height:240,margin:24,display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",children:[Object(h.jsx)("div",{style:t,children:"\xa0"}),Object(h.jsxs)(u.a,{display:"inline-flex",alignItems:"center",justifyContent:"space-between",width:190,height:18,margin:5,children:[Object(h.jsx)(V.a,{href:"#",borderBottom:"none",onClick:function(t){e.props.handleShowDetails(e.props.fileItem)},children:Object(h.jsx)(_.a,{icon:F.a,color:"info"})}),Object(h.jsx)(X.a,{overflow:"hidden",maxWidth:155,maxHeigh:24,children:e.props.fileItem.basename}),Object(h.jsx)(V.a,{href:e.context.davClient.getFileDownloadLink(e.props.fileItem.filename),target:"_blank",borderBottom:"none",children:Object(h.jsx)(N.a,{color:"success"})})]})]})},e.renderTable=function(){var t={};null!==e.state.thumb&&(t={backgroundImage:"url("+e.state.thumb+")",backgroundPosition:"center",backgroundSize:"cover",width:"24px",height:"20px",margin:"0px"});return Object(h.jsxs)(U.a.Row,{isSelectable:!0,justifyContent:"space-between",height:32,children:[Object(h.jsx)(U.a.TextCell,{textAlign:"center",maxWidth:48,children:Object(h.jsx)("div",{style:t})}),Object(h.jsx)(U.a.TextCell,{textAlign:"left",children:Object(h.jsx)(V.a,{href:e.context.davClient.getFileDownloadLink(e.props.fileItem.filename),target:"_blank",borderBottom:"none",children:e.props.fileItem.basename})}),Object(h.jsx)(U.a.TextCell,{textAlign:"left",children:e.renderMimeType(e.props.fileItem.mimeType)}),Object(h.jsx)(U.a.TextCell,{textAlign:"left",children:e.renderFileItemSize()}),Object(h.jsx)(U.a.TextCell,{textAlign:"left",children:e.renderHttpDate(e.props.fileItem.lastmod)}),Object(h.jsxs)(U.a.TextCell,{textAlign:"center",children:[Object(h.jsx)(V.a,{href:"#",onClick:function(t){e.props.handleShowDetails(e.props.fileItem)},marginRight:5,children:Object(h.jsx)(_.a,{icon:F.a,color:"info"})}),"\xa0",Object(h.jsx)(V.a,{href:e.context.davClient.getFileDownloadLink(e.props.fileItem.filename),target:"_blank",children:Object(h.jsx)(N.a,{color:"success"})})]})]},e.props.fileItem.basename)},e.state={thumb:null},e}return Object(c.a)(n)}(Q);$.contextType=f;var ee=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))).navigate=function(t){e.setState({filter:"",filterRegExp:new RegExp(".*","i")},(function(){e.props.handleNavigate(t)}))},e.renderFolders=function(){return e.props.folders.filter((function(t){return-1!==t.basename.search(e.context.filterRegExp)})).map((function(t,n){return Object(h.jsx)(Y,{fileItem:t,displayMode:e.props.displayMode,handleNavigate:e.navigate,handleShowDetails:e.props.handleShowDetails},"dir_"+n)}))},e.renderFiles=function(){return e.props.files.filter((function(t){return-1!==t.basename.search(e.context.filterRegExp)})).map((function(t,n){return e.context.isImageFile(t.basename)?Object(h.jsx)($,{fileItem:t,displayMode:e.props.displayMode,handleShowDetails:e.props.handleShowDetails},"file_"+n):Object(h.jsx)(Q,{fileItem:t,displayMode:e.props.displayMode,handleShowDetails:e.props.handleShowDetails},"file_"+n)}))},e.renderDirectoryContentsGrid=function(){return Object(h.jsxs)(u.a,{display:"flex",flexWrap:"wrap",justifyContent:"space-evenly",background:"overlay",children:[e.renderFolders(),e.renderFiles()]})},e.renderDirectoryContentsTable=function(){return Object(h.jsxs)(U.a,{children:[Object(h.jsxs)(U.a.Head,{height:32,children:[Object(h.jsx)(U.a.TextHeaderCell,{textAlign:"center",maxWidth:48,children:"\xa0"}),Object(h.jsx)(U.a.TextHeaderCell,{textAlign:"left",children:"Name"}),Object(h.jsx)(U.a.TextHeaderCell,{textAlign:"left",children:"Type"}),Object(h.jsx)(U.a.TextHeaderCell,{textAlign:"left",children:"Size"}),Object(h.jsx)(U.a.TextHeaderCell,{textAlign:"left",children:"Modified"}),Object(h.jsx)(U.a.TextHeaderCell,{textAlign:"center",children:"Actions"})]}),Object(h.jsxs)(U.a.Body,{children:[e.renderFolders(),e.renderFiles()]})]})},e.render=function(){var t;switch(e.props.displayMode){case"grid":t=e.renderDirectoryContentsGrid();break;case"table":t=e.renderDirectoryContentsTable();break;default:console.log("Invalid display mode ".concat(e.props.displayMode,". Using grid as a default.")),t=e.renderDirectoryContentsGrid()}return t},e}return Object(c.a)(n)}(a.Component);ee.contextType=f;var te=n(344),ne=n(345),ae=n(342),ie=n(343),re=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))).render=function(){var t=e.props.currentDirectory,n=Object(h.jsx)(ae.a,{size:18,marginLeft:5,marginRight:5}),a=Object(h.jsx)(ie.a,{size:18,marginLeft:5,marginRight:5}),i="/"===t?[""]:t.split("/"),r=[],o=i.map((function(t,i){var o=0===i?a:n;r.push(t);var c=r.join("/");return Object(h.jsxs)(V.a,{href:"#",display:"flex",alignItems:"center",borderBottom:"none",onClick:function(){e.props.handleNavigate(""===t?"/":c)},children:[o,t]},i+1)}));return Object(h.jsx)(u.a,{display:"flex",padding:8,background:"tint2",children:o})},e}return Object(c.a)(n)}(a.Component),oe=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).renderDisplayTools=function(){return Object(h.jsxs)(a.Fragment,{children:[Object(h.jsx)(V.a,{href:"#",style:{display:"flex",alignItems:"center"},onClick:function(t){return e.props.handleDisplayMode("grid")},children:Object(h.jsx)(te.a,{size:18,style:{marginLeft:"5px",marginRight:"5px"}})}),"\xa0",Object(h.jsx)(V.a,{href:"#",style:{display:"flex",alignItems:"center"},onClick:function(t){return e.props.handleDisplayMode("table")},children:Object(h.jsx)(ne.a,{size:18,style:{marginLeft:"5px",marginRight:"5px"}})})]})},e.render=function(){return Object(h.jsxs)(u.a,{zIndex:1,flexShrink:0,background:"tint2",display:"grid",gridTemplateColumns:"auto 1fr",children:[Object(h.jsx)(re,{handleNavigate:e.props.handleNavigate,currentDirectory:e.props.currentDirectory}),Object(h.jsx)(u.a,{justifySelf:"end",display:"inline-flex",alignItems:"center",children:e.renderDisplayTools()})]})},e}return Object(c.a)(n)}(a.Component);oe.contextType=f;var ce=function(e){var t=e.children;return Object(h.jsx)("div",{style:{paddingTop:"10px"},children:t})},se=n(346),le=n(347),de={folderLabel:{display:"grid",justifyItems:"start",gridTemplateColumns:"auto auto 1fr",span:{marginLeft:"5px"},fontFamily:"Lato"},collapsibleOpen:{height:"auto",overflow:"hidden",paddingLeft:"20px"},collapsibleClosed:{height:"0px",overflow:"hidden",paddingLeft:"20px"}},ue=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){var e;return Object(s.a)(this,n),(e=t.call(this)).getDirectoryContents=Object(b.a)(m.a.mark((function t(){var n,a;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=[],!e.context.connectionValid){t.next=7;break}return t.next=4,e.context.davClient.getDirectoryContents(e.props.absolutePath);case 4:a=t.sent,n=a.filter((function(e){return"directory"===e.type})),e.setState({subDirs:n});case 7:case"end":return t.stop()}}),t)}))),e.handleToggle=function(t){e.setState({isOpen:!e.state.isOpen},(function(){e.state.isOpen&&0===e.state.subDirs.length&&e.getDirectoryContents()}))},e.handleClick=function(t){0===e.state.subDirs.length&&(e.getDirectoryContents(),e.setState({isOpen:!0})),e.props.handleNavigate(e.props.absolutePath)},e.renderSubDirectories=function(){return e.state.subDirs.map((function(t,a){return Object(h.jsx)(n,{basename:t.basename,absolutePath:"".concat(e.props.absolutePath,"/").concat(t.basename),handleNavigate:e.props.handleNavigate},"".concat(e.props.id,"-").concat(a))}))},e.render=function(){var t=e.state.isOpen?se.a:ae.a,n=e.state.isOpen?J.a:le.a;return Object(h.jsxs)("div",{children:[Object(h.jsxs)("div",{style:de.folderLabel,children:[Object(h.jsx)(_.a,{onClick:e.handleToggle,icon:t,size:16,marginRight:"10",cursor:"pointer"}),Object(h.jsxs)("div",{style:de.folderLabel,onClick:e.handleClick,children:[Object(h.jsx)(_.a,{icon:n,size:16,color:"#F7D154",cursor:"pointer"}),Object(h.jsx)(X.a,{style:de.folderLabel.span,cursor:"pointer",children:e.props.basename})]})]}),Object(h.jsx)("div",{style:e.state.isOpen?de.collapsibleOpen:de.collapsibleClosed,children:e.renderSubDirectories()})]})},e.state={isOpen:!1,subDirs:[]},e}return Object(c.a)(n)}(a.Component);ue.contextType=f;var je=ue,he=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){var e;return Object(s.a)(this,n),(e=t.call(this)).componentDidUpdate=function(){e.context.connectionValid&&null!==e.context.davClient&&null===e.state.currentDirectory&&e.setState({currentDirectory:"/"},(function(){e.getDirectoryContents()}))},e.getDirectoryContents=Object(b.a)(m.a.mark((function t(){var n,a,i;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=[],a=[],!e.context.connectionValid){t.next=9;break}return t.next=5,e.context.davClient.getDirectoryContents(e.state.currentDirectory);case 5:i=t.sent,n=i.filter((function(e){return"directory"===e.type})),a=i.filter((function(e){return"file"===e.type})),"/"===e.state.currentDirectory&&e.setState({rootDirs:n});case 9:e.setState({directories:n,files:a},(function(){console.log("".concat(n.length," directories and ").concat(a.length," files from ").concat(e.state.currentDirectory))}));case 10:case"end":return t.stop()}}),t)}))),e.navigate=function(t){var n=e.state.currentDirectory.endsWith("/")||t.startsWith("/")?"":"/",a=e.state.currentDirectory+n+t;e.setState((function(e){return{currentDirectory:a,files:[],directories:[]}}),(function(){console.log("Navigated to ".concat(a,", now get directory contents...")),e.getDirectoryContents()}))},e.navigateAbsolute=function(t){e.setState((function(e){return{currentDirectory:t,files:[],directories:[]}}),(function(){console.log("Absolute navigated to ".concat(t,", now get directory contents...")),e.getDirectoryContents()}))},e.toggleFileDetails=function(t){var n=t;n.filename.startsWith(e.context.homeDirectory)&&(n.filename=n.filename.substring(e.context.homeDirectory.length)),e.setState({showDetails:!0,detailedFileItem:n})},e.disconnect=function(){e.context.disconnect()},e.changeDisplayMode=function(t){e.setState({displayMode:t})},e.renderAvatarMenu=function(){return Object(h.jsx)(O.a,{justifySelf:"end",position:y.a.BOTTOM_RIGHT,content:Object(h.jsxs)(v.a,{children:[Object(h.jsxs)(v.a.Group,{children:[Object(h.jsx)(v.a.Item,{icon:F.a,intent:"success",children:Object(h.jsx)(C.a,{color:"green",children:e.context.username})}),Object(h.jsx)(v.a.Item,{children:e.context.getClientUrl()})]}),Object(h.jsx)(v.a.Divider,{}),Object(h.jsx)(v.a.Group,{children:Object(h.jsx)(v.a.Item,{icon:k.a,intent:"danger",onClick:function(){e.disconnect()},children:"Disconnect"})})]}),children:Object(h.jsx)(D.a,{name:e.context.username,size:32,marginLeft:15,marginRight:15,style:{cursor:"pointer"},justifySelf:"end"})})},e.render=function(){return e.context.connectionValid?e.state.currentDirectory?Object(h.jsxs)(u.a,{display:"grid",gridTemplateColumns:"1fr 4fr",height:"100%",children:[Object(h.jsxs)(u.a,{background:"blueTint",elevation:0,padding:15,display:"grid",gridTemplateRows:"auto auto 1fr",gridTemplateColumns:"auto",overflowX:"scroll",children:[Object(h.jsx)(u.a,{background:"blueTint",children:Object(h.jsx)(T.a,{size:900,color:"neutral",textAlign:"left",children:"My files"})}),Object(h.jsx)(u.a,{background:"blueTint",marginTop:15,children:Object(h.jsx)(T.a,{size:600,color:"neutral",textAlign:"left",children:"File manager"})}),Object(h.jsx)(ce,{children:e.state.rootDirs.map((function(t,n){return Object(h.jsx)(je,{id:"treefolder-".concat(n),absolutePath:"/".concat(t.basename),basename:t.basename,handleNavigate:e.navigateAbsolute},"treefolder-".concat(n))}))})]}),Object(h.jsxs)(u.a,{display:"grid",gridTemplateRows:"auto auto 1fr",children:[Object(h.jsxs)(u.a,{background:"tint2",display:"grid",gridTemplateColumns:"1fr auto",paddingTop:15,paddingBottom:15,paddingLeft:15,justifyItems:"stretch",children:[Object(h.jsx)(I.a,{placeholder:"Search something...",width:"75%",justifySelf:"center",onChange:function(t){return e.context.filterFileItems(t.target.value)},value:e.context.filter}),e.renderAvatarMenu()]}),Object(h.jsx)(oe,{currentDirectory:e.state.currentDirectory,handleDisplayMode:e.changeDisplayMode,handleNavigate:e.navigateAbsolute}),Object(h.jsx)(ee,{displayMode:e.state.displayMode,folders:e.state.directories,files:e.state.files,handleNavigate:e.navigate,handleShowDetails:e.toggleFileDetails})]}),Object(h.jsx)(S.a,{id:"side-details",isShown:e.state.showDetails,onCloseComplete:function(){return e.setState({showDetails:!1})},children:Object(h.jsx)(E,{fileItem:e.state.detailedFileItem,davClient:e.state.davClient})})]}):Object(h.jsxs)(u.a,{gridTemplateColumns:"auto",children:[Object(h.jsx)(w.a,{marginX:"auto",marginTop:120}),Object(h.jsx)(T.a,{size:600,marginX:"auto",marginTop:15,children:"Nico's Drive is loading..."})]}):Object(h.jsx)(M,{})},e.state={currentDirectory:null,directories:[],files:[],rootDirs:[],showDetails:!1,displayMode:"table"},e}return Object(c.a)(n)}(a.Component);he.contextType=f;var pe=n(350),fe=n(354),xe=n(307),be=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){var e;return Object(s.a)(this,n),(e=t.call(this)).componentDidUpdate=function(){""===e.state.url&&e.buildUrl()},e.buildUrl=function(){var t="localhost"===window.location.hostname?"http":"https",n="localhost"===window.location.hostname?"8080":window.location.port,a="".concat(t,"://").concat(window.location.hostname,":").concat(n,"/").concat(e.state.davContext,"/").concat(e.state.username,"/");e.setState({url:a})},e.testConnection=Object(b.a)(m.a.mark((function t(){var n,a;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{n={authType:j.AuthType.Basic,username:e.state.username,password:e.state.password},a=Object(j.createClient)(e.state.url,n),e.context.setDavClient(a,e.state.url),e.setState({url:"",username:"",password:"",errorMessage:""})}catch(i){console.error("Could not connect to webdav: "+JSON.stringify(i)),e.context.setDavClient(null),e.context.setConnectionValid(!1),e.setState({errorMessage:"Something went wrong while connecting. Check your credentiuals and try again."})}finally{e.setState({isLoading:!1})}case 1:case"end":return t.stop()}}),t)}))),e.componentDidMount=function(){e.setState({username:e.context.username,password:e.context.password,url:e.context.getClientUrl()+e.context.homeDirectory,errorMessage:""})},e.onConfirm=function(){e.setState({isLoading:!0},(function(){return e.testConnection()}))},e.onCloseComplete=function(){e.context.setShowConnectionDialog(!1),e.setState({isLoading:!1,errorMessage:""})},e.onTxtLoginChange=function(t){e.setState({username:t.target.value},(function(){e.buildUrl()}))},e.renderDialog=function(){return Object(h.jsx)(pe.a,{isShown:e.context.showConnectionDialog,title:"WebDAV Connection setup...",onCloseComplete:function(){return e.onCloseComplete()},isConfirmLoading:e.state.isLoading,onConfirm:function(t){return e.onConfirm(t)},hasFooter:!1,children:Object(h.jsxs)(u.a,{display:"grid",gridTemplateColumns:"auto",children:[Object(h.jsx)(fe.a,{id:"txt-login",value:e.state.username,onChange:e.onTxtLoginChange,placeholder:"Login name...",label:"Login:"}),Object(h.jsx)(fe.a,{id:"txt-password",type:"password",value:e.state.password,onChange:function(t){return e.setState({password:t.target.value})},placeholder:"Password...",label:"Password:"}),Object(h.jsx)(fe.a,{id:"txt-url",value:e.state.url,onChange:function(t){return e.setState({url:t.target.value})},placeholder:"WebDAV URL...",label:"WebDAV base URL:"}),Object(h.jsxs)(u.a,{children:[Object(h.jsx)(xe.a,{children:e.state.errorMessage}),Object(h.jsx)(A.a,{is:"div",marginTop:16,onClick:function(){return e.onConfirm()},disabled:e.state.isLoading,appearance:"primary",intent:"success",children:e.state.isLoading?"Please wait...":"Connect"})]})]})})},e.render=function(){return e.renderDialog()},e.state={isLoading:!1,username:"",password:"",url:"",errorMessage:"",davContext:"dav"},e}return Object(c.a)(n)}(a.Component);be.contextType=f;var ge=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))).render=function(){return Object(h.jsx)("div",{className:"App",height:"100%",children:Object(h.jsx)(u.a,{clearfix:!0,width:"100%",height:"100%",children:Object(h.jsxs)(x,{children:[Object(h.jsx)(be,{}),Object(h.jsx)(he,{})]})})})},e}return Object(c.a)(n)}(a.Component),me=ge,Oe=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,361)).then((function(t){var n=t.getCLS,a=t.getFID,i=t.getFCP,r=t.getLCP,o=t.getTTFB;n(e),a(e),i(e),r(e),o(e)}))},ye=n(130),ve=n(135),Ce=n(134),De=Object(Ce.merge)({},ve.a,{typography:{fontFamilies:{display:"Lato, sans-serif",ui:"Lato, sans-serif",mono:'"SF Mono", monospace'}},components:{Text:{baseStyle:{fontFamily:"Lato, sans-serif"}},Heading:{baseStyle:{fontFamily:"Lato, sans-serif"}},Link:{baseStyle:{fontFamily:"Lato, sans-serif"}}}});o.a.render(Object(h.jsx)(i.a.StrictMode,{children:Object(h.jsx)(ye.a,{value:De,children:Object(h.jsx)(me,{})})}),document.getElementById("root")),Oe()}},[[302,1,2]]]);
//# sourceMappingURL=main.c2d8f78f.chunk.js.map